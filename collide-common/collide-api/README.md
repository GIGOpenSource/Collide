# Collide API æ¨¡å—

## ğŸ“‹ æ¦‚è¿°
Collide API æ¨¡å—æŒ‰ä¸šåŠ¡é¢†åŸŸé‡æ–°ç»„ç»‡ï¼Œæä¾›ç»Ÿä¸€çš„å…¬å…±APIæ¥å£ã€è¯·æ±‚å“åº”å¯¹è±¡ã€å¸¸é‡å®šä¹‰å’ŒRPCæœåŠ¡æ¥å£ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### è®¾è®¡åŸåˆ™
- **ä¸šåŠ¡å†…èš**: ç›¸å…³åŠŸèƒ½èšåˆåœ¨åŒä¸€ä¸šåŠ¡åŸŸ
- **ä½è€¦åˆ**: ä¸šåŠ¡åŸŸä¹‹é—´æœ€å°åŒ–ä¾èµ–
- **ç»Ÿä¸€è§„èŒƒ**: æ‰€æœ‰ä¸šåŠ¡åŸŸéµå¾ªç›¸åŒçš„ç›®å½•ç»“æ„
- **å‘ä¸‹å…¼å®¹**: ä¿æŒç°æœ‰æ¥å£ä¸å˜ï¼Œé€æ­¥è¿ç§»

### ç›®å½•ç»“æ„è§„èŒƒ
æ¯ä¸ªä¸šåŠ¡åŸŸéƒ½åŒ…å«ä»¥ä¸‹æ ‡å‡†ç›®å½•ï¼š
```
{domain}/
â”œâ”€â”€ constant/     # å¸¸é‡å®šä¹‰
â”œâ”€â”€ request/      # è¯·æ±‚å¯¹è±¡
â”œâ”€â”€ response/     # å“åº”å¯¹è±¡  
â”œâ”€â”€ service/      # RPCæœåŠ¡æ¥å£
â””â”€â”€ enums/        # æšä¸¾å®šä¹‰
```

## ğŸ“ å½“å‰ä¸šåŠ¡åŸŸ

### ğŸ”§ common/ - é€šç”¨ç»„ä»¶
**ä½œç”¨**: æä¾›å„ä¸šåŠ¡åŸŸå…±äº«çš„åŸºç¡€ç»„ä»¶
```
common/
â”œâ”€â”€ constant/
â”‚   â”œâ”€â”€ CommonConstant.java          # é€šç”¨å¸¸é‡
â”‚   â”œâ”€â”€ BusinessCode.java            # ä¸šåŠ¡ä»£ç æšä¸¾
â”‚   â””â”€â”€ BizOrderType.java            # è®¢å•ç±»å‹æšä¸¾
â”œâ”€â”€ request/
â”‚   â””â”€â”€ BasePageRequest.java         # é€šç”¨åˆ†é¡µè¯·æ±‚åŸºç±»
â”œâ”€â”€ response/
â”‚   â””â”€â”€ BaseListResponse.java        # é€šç”¨åˆ—è¡¨å“åº”åŸºç±»
â””â”€â”€ enums/
    â””â”€â”€ BaseStatus.java              # é€šç”¨çŠ¶æ€æšä¸¾
```

### ğŸ” auth/ - è®¤è¯æˆæƒ
**ä½œç”¨**: æä¾›è®¤è¯ã€æˆæƒã€OAuth2.0ç›¸å…³çš„APIå®šä¹‰
```
auth/
â”œâ”€â”€ constant/
â”‚   â””â”€â”€ AuthConstant.java            # è®¤è¯ç›¸å…³å¸¸é‡
â”œâ”€â”€ request/
â”‚   â””â”€â”€ LoginRequest.java            # ç»Ÿä¸€ç™»å½•è¯·æ±‚
â”œâ”€â”€ response/
â”‚   â””â”€â”€ LoginResponse.java           # ç™»å½•å“åº”
â”œâ”€â”€ service/
â”‚   â””â”€â”€ AuthFacadeService.java       # è®¤è¯RPCæœåŠ¡æ¥å£
â””â”€â”€ enums/
    â””â”€â”€ LoginType.java               # ç™»å½•ç±»å‹æšä¸¾
```

**æ ¸å¿ƒåŠŸèƒ½**:
- å¤šæ–¹å¼ç™»å½•æ”¯æŒï¼ˆç”¨æˆ·åå¯†ç ã€æ‰‹æœºéªŒè¯ç ã€ç¬¬ä¸‰æ–¹OAuthï¼‰
- OAuth2.0å®Œæ•´æµç¨‹ï¼ˆæˆæƒç ã€è®¿é—®ä»¤ç‰Œã€åˆ·æ–°ä»¤ç‰Œï¼‰
- éªŒè¯ç å‘é€å’ŒéªŒè¯
- TokenéªŒè¯å’Œåˆ·æ–°

### ğŸ‘¤ user/ - ç”¨æˆ·ç®¡ç†
**ä½œç”¨**: æä¾›ç”¨æˆ·ä¿¡æ¯ç®¡ç†ç›¸å…³API
```
user/
â”œâ”€â”€ constant/           # ç”¨æˆ·ç›¸å…³å¸¸é‡
â”œâ”€â”€ request/
â”‚   â”œâ”€â”€ condition/      # æŸ¥è¯¢æ¡ä»¶å¯¹è±¡
â”‚   â””â”€â”€ UserModifyRequest.java       # ç”¨æˆ·ä¿®æ”¹è¯·æ±‚
â”œâ”€â”€ response/
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ BasicUserInfo.java       # åŸºç¡€ç”¨æˆ·ä¿¡æ¯
â”‚       â””â”€â”€ UserInfo.java            # å®Œæ•´ç”¨æˆ·ä¿¡æ¯
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ UserFacadeService.java       # ç”¨æˆ·RPCæœåŠ¡æ¥å£
â”‚   â””â”€â”€ UserManageFacadeService.java # ç”¨æˆ·ç®¡ç†RPCæœåŠ¡æ¥å£
â””â”€â”€ enums/
    â”œâ”€â”€ UserRole.java                # ç”¨æˆ·è§’è‰²æšä¸¾
    â”œâ”€â”€ UserStateEnum.java           # ç”¨æˆ·çŠ¶æ€æšä¸¾
    â”œâ”€â”€ UserType.java                # ç”¨æˆ·ç±»å‹æšä¸¾
    â”œâ”€â”€ UserOperateTypeEnum.java     # ç”¨æˆ·æ“ä½œç±»å‹æšä¸¾
    â””â”€â”€ UserPermission.java          # ç”¨æˆ·æƒé™æšä¸¾
```

### ğŸ“ content/ - å†…å®¹ç®¡ç†
**ä½œç”¨**: æä¾›å†…å®¹å‘å¸ƒã€ç®¡ç†ã€å®¡æ ¸ç›¸å…³API
```
content/
â”œâ”€â”€ constant/
â”‚   â””â”€â”€ ContentConstant.java         # å†…å®¹ç›¸å…³å¸¸é‡
â””â”€â”€ enums/
    â””â”€â”€ ContentType.java             # å†…å®¹ç±»å‹æšä¸¾
```

**æ”¯æŒçš„å†…å®¹ç±»å‹**:
- æ–‡æœ¬å†…å®¹ã€å›¾ç‰‡å†…å®¹ã€è§†é¢‘å†…å®¹ã€éŸ³é¢‘å†…å®¹
- é“¾æ¥åˆ†äº«ã€æ··åˆå†…å®¹
- å®Œæ•´çš„å®¡æ ¸æµç¨‹å’ŒçŠ¶æ€ç®¡ç†

### ğŸŒŸ social/ - ç¤¾äº¤äº’åŠ¨
**ä½œç”¨**: æä¾›ç¤¾äº¤åŠ¨æ€ã€æ—¶é—´çº¿ã€é€šçŸ¥ç›¸å…³API
```
social/
â”œâ”€â”€ constant/
â”‚   â””â”€â”€ SocialConstant.java          # ç¤¾äº¤ç›¸å…³å¸¸é‡
â””â”€â”€ ...
```

**æ ¸å¿ƒåŠŸèƒ½**:
- åŠ¨æ€å‘å¸ƒï¼ˆåŸåˆ›ã€è½¬å‘ã€å›å¤ï¼‰
- å¤šç§å¯è§æ€§æ§åˆ¶
- å®Œæ•´çš„äº’åŠ¨ç±»å‹ï¼ˆç‚¹èµã€è¯„è®ºã€è½¬å‘ã€æ”¶è—ã€åˆ†äº«ï¼‰
- å¤šç±»å‹é€šçŸ¥ç³»ç»Ÿ
- å¤šç§æ—¶é—´çº¿ï¼ˆä¸»é¡µã€å…³æ³¨ã€æ¨èã€çƒ­é—¨ã€ä¸ªäººï¼‰

### ğŸ’« interaction/ - äº’åŠ¨ç®¡ç†
**ä½œç”¨**: æä¾›ç‚¹èµã€æ”¶è—ã€è¯„è®ºç­‰äº’åŠ¨åŠŸèƒ½API
```
interaction/
â””â”€â”€ enums/
    â””â”€â”€ InteractionType.java         # äº’åŠ¨ç±»å‹æšä¸¾
```

**æ”¯æŒçš„äº’åŠ¨ç±»å‹**:
- ç‚¹èµ/å–æ¶ˆç‚¹èµã€æ”¶è—/å–æ¶ˆæ”¶è—
- è¯„è®º/åˆ é™¤è¯„è®ºã€è½¬å‘/å–æ¶ˆè½¬å‘  
- åˆ†äº«ã€å…³æ³¨/å–æ¶ˆå…³æ³¨ã€ä¸¾æŠ¥

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. æ·»åŠ ä¾èµ–
```xml
<dependency>
    <groupId>com.gig</groupId>
    <artifactId>collide-api</artifactId>
    <version>1.0.0-SNAPSHOT</version>
</dependency>
```

### 2. ä½¿ç”¨é€šç”¨ç»„ä»¶
```java
// ä½¿ç”¨é€šç”¨åˆ†é¡µè¯·æ±‚
public class UserPageRequest extends BasePageRequest {
    private String keyword;
    // ...
}

// ä½¿ç”¨é€šç”¨çŠ¶æ€æšä¸¾
BaseStatus status = BaseStatus.ACTIVE;

// ä½¿ç”¨é€šç”¨åˆ—è¡¨å“åº”
BaseListResponse<UserInfo> response = BaseListResponse.success(userList, totalCount);
```

### 3. å®ç°RPCæœåŠ¡
```java
@DubboService
public class AuthFacadeServiceImpl implements AuthFacadeService {
    
    @Override
    public LoginResponse login(LoginRequest request) {
        // å®ç°ç™»å½•é€»è¾‘
        return LoginResponse.success(accessToken, refreshToken, expiresIn, userId, username);
    }
}
```

### 4. ä½¿ç”¨æšä¸¾å’Œå¸¸é‡
```java
// ä½¿ç”¨ç™»å½•ç±»å‹æšä¸¾
if (loginType == LoginType.USERNAME_PASSWORD) {
    // ç”¨æˆ·åå¯†ç ç™»å½•é€»è¾‘
}

// ä½¿ç”¨è®¤è¯å¸¸é‡
String tokenHeader = AuthConstant.Token.TOKEN_HEADER;
int tokenExpire = AuthConstant.Token.DEFAULT_ACCESS_TOKEN_EXPIRE;
```

## ğŸ“ˆ æ‰©å±•è§„åˆ’

### å³å°†æ·»åŠ çš„ä¸šåŠ¡åŸŸ

1. **follow/** - å…³æ³¨å…³ç³»ç®¡ç†
2. **category/** - åˆ†ç±»ç®¡ç†
3. **tag/** - æ ‡ç­¾ç®¡ç†  
4. **payment/** - æ”¯ä»˜ç³»ç»Ÿ
5. **statistics/** - ç»Ÿè®¡åˆ†æ
6. **admin/** - ç®¡ç†åå°

### æ‰©å±•åŸåˆ™

1. **éµå¾ªç°æœ‰è§„èŒƒ**: æ–°ä¸šåŠ¡åŸŸå¿…é¡»éµå¾ªæ ‡å‡†ç›®å½•ç»“æ„
2. **ä¿æŒå‘ä¸‹å…¼å®¹**: ä¸ç ´åç°æœ‰æ¥å£
3. **æ–‡æ¡£å…ˆè¡Œ**: æ–°å¢ä¸šåŠ¡åŸŸéœ€è¦å®Œæ•´çš„APIæ–‡æ¡£
4. **æµ‹è¯•è¦†ç›–**: ç¡®ä¿RPCæ¥å£æœ‰å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹

## ğŸ”„ è¿ç§»æŒ‡å—

### å¯¹äºæ–°å¼€å‘
- ç›´æ¥ä½¿ç”¨æ–°çš„ä¸šåŠ¡åŸŸAPI
- éµå¾ªç»Ÿä¸€çš„å‘½åè§„èŒƒ
- ä½¿ç”¨é€šç”¨åŸºç±»å‡å°‘é‡å¤ä»£ç 

### å¯¹äºç°æœ‰ä»£ç 
- é€æ­¥è¿ç§»åˆ°æ–°çš„APIç»“æ„
- ä¿æŒç°æœ‰æ¥å£çš„å‘ä¸‹å…¼å®¹æ€§
- æ–°åŠŸèƒ½ä¼˜å…ˆä½¿ç”¨æ–°ç»“æ„

## ğŸ“š ç›¸å…³æ–‡æ¡£
- [APIè®¾è®¡è§„èŒƒ](../../../docs/api-design-standards.md)
- [RPCæœåŠ¡å¼€å‘æŒ‡å—](../../../docs/rpc-development-guide.md)
- [æ•°æ®åº“è®¾è®¡è§„èŒƒ](../../../docs/database-design-standards.md)

---

**é€šè¿‡ä¸šåŠ¡åŸŸç»„ç»‡ï¼ŒCollide APIæ¨¡å—å®ç°äº†æ›´å¥½çš„ä»£ç å¤ç”¨å’Œæ¨¡å—è§£è€¦ï¼** ğŸš€ 