# Collide æœç´¢æœåŠ¡ API æ–‡æ¡£

## æ¦‚è¿°

Collide æœç´¢æœåŠ¡æä¾›å¼ºå¤§çš„å…¨æ–‡æœç´¢åŠŸèƒ½ï¼ŒåŒ…æ‹¬å†…å®¹æœç´¢ã€ç”¨æˆ·æœç´¢ã€å•†å“æœç´¢ã€æ™ºèƒ½æ¨èã€æœç´¢å†å²ç®¡ç†ã€Tagæ··åˆæœç´¢ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚åŸºäºElasticsearchæ„å»ºï¼Œæä¾›é«˜æ€§èƒ½ã€é«˜ç›¸å…³æ€§çš„æœç´¢ä½“éªŒã€‚

**æœåŠ¡ç‰ˆæœ¬**: v2.0.0 (ç¼“å­˜å¢å¼ºç‰ˆ)  
**åŸºç¡€è·¯å¾„**: `/api/v1/search`  
**DubboæœåŠ¡**: `collide-search` (version: 1.0.0)  
**è®¾è®¡ç†å¿µ**: æ™ºèƒ½æœç´¢å¼•æ“ï¼Œæä¾›ç²¾å‡†åŒ¹é…å’Œä¸ªæ€§åŒ–æ¨èï¼Œä¼˜åŒ–ç”¨æˆ·å‘ç°ä½“éªŒ

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **ğŸš€ é«˜æ€§èƒ½ç¼“å­˜**: åŸºäºJetCacheçš„åˆ†å¸ƒå¼ç¼“å­˜ï¼Œæ˜¾è‘—æå‡æœç´¢å“åº”é€Ÿåº¦
- **ğŸ” æ™ºèƒ½æœç´¢**: æ”¯æŒå…¨æ–‡æœç´¢ã€æ¨¡ç³ŠåŒ¹é…ã€æ™ºèƒ½æ¨è
- **ğŸ·ï¸ Tagæ··åˆæœç´¢**: æ”¯æŒæŒ‰æ ‡ç­¾åŒæ—¶æœç´¢ç”¨æˆ·å’Œå†…å®¹ï¼Œæä¾›èšåˆç»“æœ
- **ğŸ“ˆ æœç´¢åˆ†æ**: å®Œæ•´çš„æœç´¢ç»Ÿè®¡å’Œç”¨æˆ·è¡Œä¸ºåˆ†æ
- **âš¡ å®æ—¶å»ºè®®**: æ™ºèƒ½æœç´¢å»ºè®®å’Œçƒ­é—¨å…³é”®è¯æ¨è
- **ğŸ”„ è·¨æ¨¡å—é›†æˆ**: é€šè¿‡Dubboä¸ç”¨æˆ·ã€å†…å®¹æ¨¡å—æ·±åº¦é›†æˆ

## ğŸ†• v2.0.0 æ–°å¢åŠŸèƒ½

- **Tagæ··åˆæœç´¢**: æ”¯æŒæŒ‰æ ‡ç­¾åŒæ—¶æœç´¢ç”¨æˆ·å’Œå†…å®¹çš„èšåˆæ¥å£
- **JetCacheç¼“å­˜**: å…¨é¢çš„ç¼“å­˜ç­–ç•¥ï¼Œæå‡æœç´¢æ€§èƒ½
- **APIè®¾è®¡ä¼˜åŒ–**: ç»Ÿä¸€ä½¿ç”¨ `currentPage` å‚æ•°ï¼Œå¯¹é½ç³»ç»Ÿè®¾è®¡é£æ ¼
- **Swaggeræ–‡æ¡£**: å®Œæ•´çš„OpenAPI 3.0æ–‡æ¡£æ”¯æŒ

---

## é€šç”¨æœç´¢ API

### 1. å…¨ç«™æœç´¢
**æ¥å£è·¯å¾„**: `POST /api/v1/search`  
**æ¥å£æè¿°**: å…¨ç«™ç»Ÿä¸€æœç´¢å…¥å£ï¼Œæ”¯æŒå¤šç±»å‹å†…å®¹æœç´¢

#### è¯·æ±‚å‚æ•°
```json
{
  "keyword": "Javaç¼–ç¨‹",                   // å¿…å¡«ï¼Œæœç´¢å…³é”®è¯
  "searchType": "all",                    // å¯é€‰ï¼Œæœç´¢ç±»å‹ï¼šall/content/user/goods/tag
  "userId": 12345,                        // å¯é€‰ï¼Œç”¨æˆ·IDï¼ˆç”¨äºä¸ªæ€§åŒ–æœç´¢ï¼‰
  "currentPage": 1,                      // å¯é€‰ï¼Œé¡µç ï¼Œé»˜è®¤1
  "pageSize": 20,                        // å¯é€‰ï¼Œé¡µé¢å¤§å°ï¼Œé»˜è®¤20
  "sortBy": "relevance",                 // å¯é€‰ï¼Œæ’åºæ–¹å¼ï¼šrelevance/time/popularity/rating
  "timeRange": 365,                      // å¯é€‰ï¼Œæ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ï¼Œé»˜è®¤ä¸é™åˆ¶
  "filters": {                           // å¯é€‰ï¼Œæœç´¢è¿‡æ»¤æ¡ä»¶
    "categoryId": 1001,
    "priceMin": 50.00,
    "priceMax": 200.00,
    "status": "published"
  },
  "highlightEnabled": true,              // å¯é€‰ï¼Œæ˜¯å¦é«˜äº®å…³é”®è¯ï¼Œé»˜è®¤true
  "suggestionEnabled": true              // å¯é€‰ï¼Œæ˜¯å¦è¿”å›æœç´¢å»ºè®®ï¼Œé»˜è®¤true
}
```

#### å“åº”ç¤ºä¾‹
**æˆåŠŸå“åº” (200)**:
```json
{
  "success": true,
  "responseCode": "SUCCESS",
  "responseMessage": "æœç´¢æˆåŠŸ",
  "data": {
    "keyword": "Javaç¼–ç¨‹",
    "searchType": "all",
    "totalCount": 156,
    "searchTime": 45,                    // æœç´¢è€—æ—¶ï¼ˆæ¯«ç§’ï¼‰
    "hasMore": true,
    "currentPage": 1,
    "pageSize": 20,
    "results": [
      {
        "id": "content_98765",
        "type": "content",
        "title": "<em>Java</em><em>ç¼–ç¨‹</em>å®æˆ˜æ•™ç¨‹",
        "description": "ä»é›¶åŸºç¡€åˆ°é«˜çº§å¼€å‘çš„å®Œæ•´<em>Java</em>æ•™ç¨‹...",
        "url": "/content/98765",
        "score": 9.8,
        "author": "æŠ€æœ¯è¾¾äºº",
        "publishTime": "2024-01-15T10:30:00",
        "tags": ["Java", "ç¼–ç¨‹", "æ•™ç¨‹"],
        "extra": {
          "categoryName": "ç¼–ç¨‹æŠ€æœ¯",
          "viewCount": 1250,
          "likeCount": 89
        }
      },
      {
        "id": "goods_789012",
        "type": "goods",
        "title": "<em>Java</em><em>ç¼–ç¨‹</em>å…¥é—¨åˆ°ç²¾é€š",
        "description": "ä¸“ä¸šçš„<em>Java</em>å­¦ä¹ èµ„æ–™ï¼ŒåŒ…å«è§†é¢‘å’Œæ–‡æ¡£...",
        "url": "/goods/789012",
        "score": 9.5,
        "price": 99.00,
        "seller": "æ•™è‚²æœºæ„A",
        "extra": {
          "originalPrice": 129.00,
          "soldCount": 567,
          "rating": 4.8
        }
      }
    ],
    "aggregations": {                    // èšåˆç»Ÿè®¡
      "typeCount": {
        "content": 89,
        "goods": 45,
        "user": 22
      },
      "categoryCount": {
        "ç¼–ç¨‹æŠ€æœ¯": 67,
        "æ•™è‚²åŸ¹è®­": 34,
        "å…¶ä»–": 55
      }
    },
    "suggestions": [                     // æœç´¢å»ºè®®
      "Javaç¼–ç¨‹å…¥é—¨",
      "Javaç¼–ç¨‹å®æˆ˜",
      "Javaç¼–ç¨‹æ•™ç¨‹"
    ],
    "relatedKeywords": [                 // ç›¸å…³å…³é”®è¯
      "Springæ¡†æ¶",
      "MyBatis",
      "JavaåŸºç¡€"
    ]
  }
}
```

---

### 2. æœç´¢å»ºè®®
**æ¥å£è·¯å¾„**: `GET /api/v1/search/suggestions`  
**æ¥å£æè¿°**: è·å–æœç´¢å…³é”®è¯å»ºè®®

#### è¯·æ±‚å‚æ•°
- **keyword** (query): æœç´¢å…³é”®è¯å‰ç¼€ï¼Œå¿…å¡«
- **searchType** (query): æœç´¢ç±»å‹ï¼Œå¯é€‰
- **limit** (query): è¿”å›æ•°é‡ï¼Œå¯é€‰ï¼Œé»˜è®¤10

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "data": {
    "keyword": "Java",
    "suggestions": [
      {
        "text": "Javaç¼–ç¨‹",
        "score": 95,
        "count": 1250                    // æœç´¢æ¬¡æ•°
      },
      {
        "text": "JavaåŸºç¡€",
        "score": 88,
        "count": 890
      },
      {
        "text": "Javaé¢è¯•",
        "score": 82,
        "count": 670
      }
    ]
  }
}
```

---

### 3. çƒ­é—¨æœç´¢
**æ¥å£è·¯å¾„**: `GET /api/v1/search/hot`  
**æ¥å£æè¿°**: è·å–çƒ­é—¨æœç´¢å…³é”®è¯

#### è¯·æ±‚å‚æ•°
- **searchType** (query): æœç´¢ç±»å‹ï¼Œå¯é€‰
- **timeRange** (query): æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ï¼Œå¯é€‰ï¼Œé»˜è®¤7
- **limit** (query): è¿”å›æ•°é‡ï¼Œå¯é€‰ï¼Œé»˜è®¤10

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "data": [
    {
      "keyword": "Javaç¼–ç¨‹",
      "searchCount": 15680,
      "trend": "up",                     // è¶‹åŠ¿ï¼šup/down/stable
      "ranking": 1,
      "growthRate": 15.8                 // å¢é•¿ç‡ï¼ˆ%ï¼‰
    },
    {
      "keyword": "Pythonå…¥é—¨",
      "searchCount": 12340,
      "trend": "stable",
      "ranking": 2,
      "growthRate": 2.3
    }
  ]
}
```

---

## å†…å®¹æœç´¢ API

### 1. æœç´¢å†…å®¹
**æ¥å£è·¯å¾„**: `POST /api/v1/search/content`  
**æ¥å£æè¿°**: ä¸“é—¨æœç´¢å†…å®¹ï¼ˆæ–‡ç« ã€è§†é¢‘ç­‰ï¼‰

#### è¯·æ±‚å‚æ•°
```json
{
  "keyword": "Javaè®¾è®¡æ¨¡å¼",             // å¿…å¡«ï¼Œæœç´¢å…³é”®è¯
  "contentType": "NOVEL",               // å¯é€‰ï¼Œå†…å®¹ç±»å‹
  "categoryId": 1001,                   // å¯é€‰ï¼Œåˆ†ç±»ID
  "authorId": 12345,                    // å¯é€‰ï¼Œä½œè€…ID
  "status": "published",                // å¯é€‰ï¼ŒçŠ¶æ€
  "minScore": 4.0,                      // å¯é€‰ï¼Œæœ€ä½è¯„åˆ†
  "hasChapters": true,                  // å¯é€‰ï¼Œæ˜¯å¦æœ‰ç« èŠ‚
  "sortBy": "relevance",                // å¯é€‰ï¼Œæ’åºæ–¹å¼
  "currentPage": 1,
  "pageSize": 20
}
```

---

### 2. ç›¸å…³å†…å®¹æ¨è
**æ¥å£è·¯å¾„**: `GET /api/v1/search/content/{contentId}/related`  
**æ¥å£æè¿°**: è·å–ç›¸å…³å†…å®¹æ¨è

#### è¯·æ±‚å‚æ•°
- **contentId** (path): å†…å®¹IDï¼Œå¿…å¡«
- **limit** (query): æ¨èæ•°é‡ï¼Œå¯é€‰ï¼Œé»˜è®¤10
- **userId** (query): ç”¨æˆ·IDï¼Œå¯é€‰ï¼ˆç”¨äºä¸ªæ€§åŒ–æ¨èï¼‰

---

## å•†å“æœç´¢ API

### 1. æœç´¢å•†å“
**æ¥å£è·¯å¾„**: `POST /api/v1/search/goods`  
**æ¥å£æè¿°**: ä¸“é—¨æœç´¢å•†å“

#### è¯·æ±‚å‚æ•°
```json
{
  "keyword": "ç¼–ç¨‹æ•™ç¨‹",                 // å¿…å¡«ï¼Œæœç´¢å…³é”®è¯
  "categoryId": 1001,                   // å¯é€‰ï¼Œåˆ†ç±»ID
  "brandId": 2001,                      // å¯é€‰ï¼Œå“ç‰ŒID
  "priceMin": 50.00,                    // å¯é€‰ï¼Œæœ€ä½ä»·æ ¼
  "priceMax": 200.00,                   // å¯é€‰ï¼Œæœ€é«˜ä»·æ ¼
  "hasStock": true,                     // å¯é€‰ï¼Œæ˜¯å¦æœ‰åº“å­˜
  "minRating": 4.0,                     // å¯é€‰ï¼Œæœ€ä½è¯„åˆ†
  "goodsType": "digital",               // å¯é€‰ï¼Œå•†å“ç±»å‹
  "tags": ["ç¼–ç¨‹", "Java"],              // å¯é€‰ï¼Œæ ‡ç­¾ç­›é€‰
  "sortBy": "sales",                    // å¯é€‰ï¼Œæ’åºï¼šrelevance/price/sales/rating/time
  "sortOrder": "desc",                  // å¯é€‰ï¼Œæ’åºæ–¹å‘
  "currentPage": 1,
  "pageSize": 20
}
```

---

### 2. å•†å“æ¨è
**æ¥å£è·¯å¾„**: `GET /api/v1/search/goods/recommend`  
**æ¥å£æè¿°**: å•†å“æ¨è

#### è¯·æ±‚å‚æ•°
- **userId** (query): ç”¨æˆ·IDï¼Œå¯é€‰
- **goodsId** (query): å•†å“IDï¼Œå¯é€‰ï¼ˆåŸºäºå•†å“æ¨èç›¸ä¼¼å•†å“ï¼‰
- **categoryId** (query): åˆ†ç±»IDï¼Œå¯é€‰
- **type** (query): æ¨èç±»å‹ï¼šhot/similar/collaborativeï¼Œå¯é€‰
- **limit** (query): æ¨èæ•°é‡ï¼Œå¯é€‰ï¼Œé»˜è®¤10

---

## ç”¨æˆ·æœç´¢ API

### 1. æœç´¢ç”¨æˆ·
**æ¥å£è·¯å¾„**: `POST /api/v1/search/users`  
**æ¥å£æè¿°**: æœç´¢ç”¨æˆ·

#### è¯·æ±‚å‚æ•°
```json
{
  "keyword": "æŠ€æœ¯è¾¾äºº",                 // å¿…å¡«ï¼Œæœç´¢å…³é”®è¯
  "userType": "blogger",                // å¯é€‰ï¼Œç”¨æˆ·ç±»å‹ï¼šnormal/blogger/expert
  "isVerified": true,                   // å¯é€‰ï¼Œæ˜¯å¦è®¤è¯ç”¨æˆ·
  "hasAvatar": true,                    // å¯é€‰ï¼Œæ˜¯å¦æœ‰å¤´åƒ
  "minFollowers": 100,                  // å¯é€‰ï¼Œæœ€å°‘ç²‰ä¸æ•°
  "sortBy": "followers",                // å¯é€‰ï¼Œæ’åºï¼šrelevance/followers/activity/join_time
  "currentPage": 1,
  "pageSize": 20
}
```

---

### 2. ç”¨æˆ·æ¨è
**æ¥å£è·¯å¾„**: `GET /api/v1/search/users/recommend`  
**æ¥å£æè¿°**: æ¨èç”¨æˆ·å…³æ³¨

#### è¯·æ±‚å‚æ•°
- **userId** (query): å½“å‰ç”¨æˆ·IDï¼Œå¿…å¡«
- **type** (query): æ¨èç±»å‹ï¼šsimilar/hot/newï¼Œå¯é€‰
- **limit** (query): æ¨èæ•°é‡ï¼Œå¯é€‰ï¼Œé»˜è®¤10

---

## Tagæ··åˆæœç´¢ API

### 1. Tagæ··åˆæœç´¢
**æ¥å£è·¯å¾„**: `GET /api/v1/search/tag/{tag}/mixed`  
**æ¥å£æè¿°**: æ ¹æ®æ ‡ç­¾åŒæ—¶æœç´¢ç”¨æˆ·å’Œå†…å®¹ï¼Œè¿”å›èšåˆç»“æœ

#### è¯·æ±‚å‚æ•°
- **tag** (path): æ ‡ç­¾åç§°ï¼Œå¿…å¡«
- **currentPage** (query): å½“å‰é¡µç ï¼Œå¯é€‰ï¼Œé»˜è®¤1
- **pageSize** (query): é¡µé¢å¤§å°ï¼Œå¯é€‰ï¼Œé»˜è®¤20

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "datas": [
    {
      "type": "user",
      "id": 12345,
      "name": "æŠ€æœ¯è¾¾äºº",
      "avatar": "https://example.com/avatar.jpg",
      "bio": "ä¸“æ³¨JavaæŠ€æœ¯åˆ†äº«",
      "followers": 1250,
      "isVerified": true,
      "tags": ["Java", "ç¼–ç¨‹", "æŠ€æœ¯"]
    },
    {
      "type": "content",
      "id": 98765,
      "title": "Javaç¼–ç¨‹å®æˆ˜æ•™ç¨‹",
      "description": "ä»é›¶åŸºç¡€åˆ°é«˜çº§å¼€å‘çš„å®Œæ•´Javaæ•™ç¨‹",
      "author": "æŠ€æœ¯è¾¾äºº",
      "viewCount": 15680,
      "likeCount": 892,
      "tags": ["Java", "ç¼–ç¨‹", "æ•™ç¨‹"]
    }
  ],
  "total": 156,
  "currentPage": 1,
  "pageSize": 20,
  "totalPage": 8
}
```

**ç‰¹æ€§è¯´æ˜**:
- âš¡ **20åˆ†é’Ÿç¼“å­˜**: æå‡å“åº”é€Ÿåº¦
- ğŸ”„ **æ™ºèƒ½èšåˆ**: è‡ªåŠ¨å¹³è¡¡ç”¨æˆ·å’Œå†…å®¹ç»“æœ
- ğŸ·ï¸ **ç²¾å‡†åŒ¹é…**: åŸºäºæ ‡ç­¾çš„ç²¾ç¡®æœç´¢

---

### 2. Tagæœç´¢ç”¨æˆ·
**æ¥å£è·¯å¾„**: `GET /api/v1/search/tag/{tag}/users`  
**æ¥å£æè¿°**: æ ¹æ®æ ‡ç­¾æœç´¢ç›¸å…³ç”¨æˆ·

#### è¯·æ±‚å‚æ•°
- **tag** (path): æ ‡ç­¾åç§°ï¼Œå¿…å¡«
- **currentPage** (query): å½“å‰é¡µç ï¼Œå¯é€‰ï¼Œé»˜è®¤1
- **pageSize** (query): é¡µé¢å¤§å°ï¼Œå¯é€‰ï¼Œé»˜è®¤20

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "datas": [
    {
      "id": 12345,
      "name": "æŠ€æœ¯è¾¾äºº",
      "avatar": "https://example.com/avatar.jpg",
      "bio": "ä¸“æ³¨JavaæŠ€æœ¯åˆ†äº«",
      "followers": 1250,
      "following": 89,
      "isVerified": true,
      "tags": ["Java", "ç¼–ç¨‹", "æŠ€æœ¯"],
      "joinTime": "2023-01-15T10:30:00"
    }
  ],
  "total": 45,
  "currentPage": 1,
  "pageSize": 20,
  "totalPage": 3
}
```

**ç‰¹æ€§è¯´æ˜**:
- âš¡ **20åˆ†é’Ÿç¼“å­˜**: ç”¨æˆ·æœç´¢ç»“æœç¼“å­˜
- ğŸ¯ **ä¸ªæ€§åŒ–æ’åº**: æ ¹æ®ç”¨æˆ·æ´»è·ƒåº¦å’Œå½±å“åŠ›æ’åº

---

### 3. Tagæœç´¢å†…å®¹
**æ¥å£è·¯å¾„**: `GET /api/v1/search/tag/{tag}/contents`  
**æ¥å£æè¿°**: æ ¹æ®æ ‡ç­¾æœç´¢ç›¸å…³å†…å®¹

#### è¯·æ±‚å‚æ•°
- **tag** (path): æ ‡ç­¾åç§°ï¼Œå¿…å¡«
- **currentPage** (query): å½“å‰é¡µç ï¼Œå¯é€‰ï¼Œé»˜è®¤1
- **pageSize** (query): é¡µé¢å¤§å°ï¼Œå¯é€‰ï¼Œé»˜è®¤20

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "datas": [
    {
      "id": 98765,
      "title": "Javaç¼–ç¨‹å®æˆ˜æ•™ç¨‹",
      "description": "ä»é›¶åŸºç¡€åˆ°é«˜çº§å¼€å‘çš„å®Œæ•´Javaæ•™ç¨‹",
      "contentType": "ARTICLE",
      "author": "æŠ€æœ¯è¾¾äºº",
      "authorId": 12345,
      "viewCount": 15680,
      "likeCount": 892,
      "commentCount": 156,
      "publishTime": "2024-01-15T10:30:00",
      "tags": ["Java", "ç¼–ç¨‹", "æ•™ç¨‹"],
      "status": "published"
    }
  ],
  "total": 89,
  "currentPage": 1,
  "pageSize": 20,
  "totalPage": 5
}
```

**ç‰¹æ€§è¯´æ˜**:
- âš¡ **20åˆ†é’Ÿç¼“å­˜**: å†…å®¹æœç´¢ç»“æœç¼“å­˜
- ğŸ“ˆ **æ™ºèƒ½æ’åº**: æ ¹æ®çƒ­åº¦ã€æ—¶é—´ã€ç›¸å…³æ€§ç»¼åˆæ’åº

---

## æœç´¢å†å² API

### 1. ä¿å­˜æœç´¢å†å²
**æ¥å£è·¯å¾„**: `POST /api/v1/search/history`  
**æ¥å£æè¿°**: ä¿å­˜ç”¨æˆ·æœç´¢å†å²

#### è¯·æ±‚å‚æ•°
```json
{
  "userId": 12345,                      // å¿…å¡«ï¼Œç”¨æˆ·ID
  "keyword": "Javaç¼–ç¨‹",                // å¿…å¡«ï¼Œæœç´¢å…³é”®è¯
  "searchType": "content",              // å¿…å¡«ï¼Œæœç´¢ç±»å‹
  "resultCount": 156,                   // å¯é€‰ï¼Œæœç´¢ç»“æœæ•°é‡
  "searchTime": 45,                     // å¯é€‰ï¼Œæœç´¢è€—æ—¶
  "clientInfo": {                       // å¯é€‰ï¼Œå®¢æˆ·ç«¯ä¿¡æ¯
    "platform": "app",
    "version": "1.0.0",
    "deviceId": "device123"
  }
}
```

---

### 2. è·å–æœç´¢å†å²
**æ¥å£è·¯å¾„**: `GET /api/v1/search/history`  
**æ¥å£æè¿°**: åˆ†é¡µè·å–ç”¨æˆ·æœç´¢å†å²è®°å½•

#### è¯·æ±‚å‚æ•°
- **userId** (query): ç”¨æˆ·IDï¼Œå¿…å¡«
- **searchType** (query): æœç´¢ç±»å‹ï¼Œå¯é€‰
- **currentPage** (query): å½“å‰é¡µç ï¼Œå¯é€‰ï¼Œé»˜è®¤1
- **pageSize** (query): é¡µé¢å¤§å°ï¼Œå¯é€‰ï¼Œé»˜è®¤20

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "datas": [
    {
      "id": 1001,
      "keyword": "Javaç¼–ç¨‹",
      "searchType": "content",
      "searchTime": "2024-01-16T10:30:00",
      "resultCount": 156
    },
    {
      "id": 1002,
      "keyword": "Pythonå…¥é—¨",
      "searchType": "content",
      "searchTime": "2024-01-15T15:20:00",
      "resultCount": 89
    }
  ],
  "total": 25,
  "currentPage": 1,
  "pageSize": 20,
  "totalPage": 2
}
```

**ç‰¹æ€§è¯´æ˜**:
- âš¡ **60åˆ†é’Ÿç¼“å­˜**: æœç´¢å†å²ç»“æœç¼“å­˜
- ğŸ”„ **è‡ªåŠ¨æ¸…ç†**: ç¼“å­˜å¤±æ•ˆæ—¶è‡ªåŠ¨æ¸…ç†ç›¸å…³æ•°æ®

---

### 3. æ¸…é™¤æœç´¢å†å²
**æ¥å£è·¯å¾„**: `DELETE /api/v1/search/history/{userId}`  
**æ¥å£æè¿°**: æ¸…é™¤ç”¨æˆ·æœç´¢å†å²

#### è¯·æ±‚å‚æ•°
- **userId** (path): ç”¨æˆ·IDï¼Œå¿…å¡«
- **historyIds** (query): æŒ‡å®šå†å²è®°å½•IDåˆ—è¡¨ï¼Œå¯é€‰ï¼ˆä¸ºç©ºåˆ™æ¸…é™¤å…¨éƒ¨ï¼‰

---

## æœç´¢åˆ†æ API

### 1. æœç´¢ç»Ÿè®¡
**æ¥å£è·¯å¾„**: `GET /api/v1/search/statistics`  
**æ¥å£æè¿°**: è·å–æœç´¢ç»Ÿè®¡ä¿¡æ¯

#### è¯·æ±‚å‚æ•°
- **timeRange** (query): æ—¶é—´èŒƒå›´ï¼ˆå¤©ï¼‰ï¼Œå¯é€‰ï¼Œé»˜è®¤30
- **searchType** (query): æœç´¢ç±»å‹ï¼Œå¯é€‰

#### å“åº”ç¤ºä¾‹
```json
{
  "success": true,
  "data": {
    "totalSearches": 125000,             // æ€»æœç´¢æ¬¡æ•°
    "uniqueKeywords": 8900,              // ç‹¬ç‰¹å…³é”®è¯æ•°
    "uniqueUsers": 15600,                // æœç´¢ç”¨æˆ·æ•°
    "averageResultCount": 45.6,          // å¹³å‡æœç´¢ç»“æœæ•°
    "averageSearchTime": 82,             // å¹³å‡æœç´¢è€—æ—¶ï¼ˆæ¯«ç§’ï¼‰
    "clickThroughRate": 68.5,            // ç‚¹å‡»ç‡ï¼ˆ%ï¼‰
    "zeroResultRate": 5.2,               // é›¶ç»“æœç‡ï¼ˆ%ï¼‰
    "topKeywords": [                     // çƒ­é—¨å…³é”®è¯
      {
        "keyword": "Javaç¼–ç¨‹",
        "count": 15680,
        "percentage": 12.5
      }
    ],
    "searchTrend": [                     // æœç´¢è¶‹åŠ¿
      {
        "date": "2024-01-16",
        "count": 4500
      }
    ]
  }
}
```

---

### 2. å…³é”®è¯åˆ†æ
**æ¥å£è·¯å¾„**: `GET /api/v1/search/analytics/keywords`  
**æ¥å£æè¿°**: å…³é”®è¯åˆ†æ

#### è¯·æ±‚å‚æ•°
- **keyword** (query): å…³é”®è¯ï¼Œå¯é€‰
- **timeRange** (query): æ—¶é—´èŒƒå›´ï¼Œå¯é€‰
- **searchType** (query): æœç´¢ç±»å‹ï¼Œå¯é€‰

---

### 3. ç”¨æˆ·æœç´¢è¡Œä¸ºåˆ†æ
**æ¥å£è·¯å¾„**: `GET /api/v1/search/analytics/user/{userId}`  
**æ¥å£æè¿°**: åˆ†æç”¨æˆ·æœç´¢è¡Œä¸º

#### è¯·æ±‚å‚æ•°
- **userId** (path): ç”¨æˆ·IDï¼Œå¿…å¡«
- **timeRange** (query): æ—¶é—´èŒƒå›´ï¼Œå¯é€‰

---

## æœç´¢é…ç½® API

### 1. æ›´æ–°æœç´¢é…ç½®
**æ¥å£è·¯å¾„**: `POST /api/v1/search/config`  
**æ¥å£æè¿°**: æ›´æ–°æœç´¢å¼•æ“é…ç½®

#### è¯·æ±‚å‚æ•°
```json
{
  "maxResultCount": 1000,              // æœ€å¤§æœç´¢ç»“æœæ•°
  "defaultPageSize": 20,               // é»˜è®¤é¡µé¢å¤§å°
  "maxPageSize": 100,                  // æœ€å¤§é¡µé¢å¤§å°
  "searchTimeout": 5000,               // æœç´¢è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  "enableHighlight": true,             // æ˜¯å¦å¯ç”¨é«˜äº®
  "enableSuggestion": true,            // æ˜¯å¦å¯ç”¨æœç´¢å»ºè®®
  "enableAnalytics": true,             // æ˜¯å¦å¯ç”¨æœç´¢åˆ†æ
  "stopWords": ["çš„", "äº†", "åœ¨"],      // åœç”¨è¯åˆ—è¡¨
  "synonyms": {                        // åŒä¹‰è¯é…ç½®
    "Java": ["java", "JAVA"],
    "ç¼–ç¨‹": ["ç¨‹åºè®¾è®¡", "coding"]
  }
}
```

---

### 2. è·å–æœç´¢é…ç½®
**æ¥å£è·¯å¾„**: `GET /api/v1/search/config`  
**æ¥å£æè¿°**: è·å–å½“å‰æœç´¢é…ç½®

---

### 3. é‡å»ºæœç´¢ç´¢å¼•
**æ¥å£è·¯å¾„**: `POST /api/v1/search/index/rebuild`  
**æ¥å£æè¿°**: é‡å»ºæœç´¢ç´¢å¼•

#### è¯·æ±‚å‚æ•°
```json
{
  "indexType": "content",              // å¿…å¡«ï¼Œç´¢å¼•ç±»å‹ï¼šcontent/goods/user/all
  "isFullRebuild": true,               // å¿…å¡«ï¼Œæ˜¯å¦å…¨é‡é‡å»º
  "batchSize": 1000,                   // å¯é€‰ï¼Œæ‰¹æ¬¡å¤§å°
  "operatorId": 99999                  // å¿…å¡«ï¼Œæ“ä½œäººID
}
```

---

## ğŸš€ ç¼“å­˜æ€§èƒ½ç‰¹æ€§

### ç¼“å­˜ç­–ç•¥
- **æœç´¢ç»“æœç¼“å­˜**: 30åˆ†é’Ÿï¼Œæå‡å¸¸ç”¨æœç´¢çš„å“åº”é€Ÿåº¦
- **æœç´¢å†å²ç¼“å­˜**: 60åˆ†é’Ÿï¼Œä¼˜åŒ–ç”¨æˆ·å†å²æŸ¥è¯¢æ€§èƒ½
- **çƒ­é—¨æœç´¢ç¼“å­˜**: 15åˆ†é’Ÿï¼Œå¿«é€Ÿå“åº”çƒ­æœéœ€æ±‚
- **æœç´¢å»ºè®®ç¼“å­˜**: 120åˆ†é’Ÿï¼Œé•¿æœŸç¼“å­˜æå‡è¾“å…¥ä½“éªŒ
- **Tagæ··åˆæœç´¢ç¼“å­˜**: 20åˆ†é’Ÿï¼Œå¹³è¡¡å®æ—¶æ€§å’Œæ€§èƒ½

### ç¼“å­˜ä¼˜åŒ–
- **åˆ†å¸ƒå¼ç¼“å­˜**: åŸºäºJetCacheçš„åˆ†å¸ƒå¼ç¼“å­˜æ¶æ„
- **æ™ºèƒ½å¤±æ•ˆ**: åˆ é™¤å’Œæ›´æ–°æ“ä½œè‡ªåŠ¨æ¸…ç†ç›¸å…³ç¼“å­˜
- **ç¼“å­˜é¢„çƒ­**: ç³»ç»Ÿè‡ªåŠ¨é¢„çƒ­çƒ­é—¨æœç´¢æ•°æ®
- **æ€§èƒ½ç›‘æ§**: å®æ—¶ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡å’Œå“åº”æ—¶é—´

### æ€§èƒ½æŒ‡æ ‡
- **æœç´¢å“åº”æ—¶é—´**: < 100ms (ç¼“å­˜å‘½ä¸­)
- **ç¼“å­˜å‘½ä¸­ç‡**: > 85%
- **å¹¶å‘æ”¯æŒ**: 10,000+ å¹¶å‘æœç´¢è¯·æ±‚
- **æ•°æ®åŒæ­¥**: ç¼“å­˜æ•°æ®ä¸æ•°æ®åº“å®æ—¶åŒæ­¥

---

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| SEARCH_KEYWORD_EMPTY | æœç´¢å…³é”®è¯ä¸ºç©º |
| SEARCH_KEYWORD_TOO_SHORT | æœç´¢å…³é”®è¯è¿‡çŸ­ |
| SEARCH_KEYWORD_TOO_LONG | æœç´¢å…³é”®è¯è¿‡é•¿ |
| SEARCH_TYPE_INVALID | æœç´¢ç±»å‹æ— æ•ˆ |
| SEARCH_TIMEOUT | æœç´¢è¶…æ—¶ |
| SEARCH_ENGINE_ERROR | æœç´¢å¼•æ“é”™è¯¯ |
| INDEX_NOT_EXISTS | æœç´¢ç´¢å¼•ä¸å­˜åœ¨ |
| SEARCH_QUOTA_EXCEEDED | æœç´¢é…é¢è¶…é™ |
| SEARCH_FILTER_INVALID | æœç´¢è¿‡æ»¤æ¡ä»¶æ— æ•ˆ |
| SEARCH_SORT_INVALID | æœç´¢æ’åºå‚æ•°æ— æ•ˆ |
| TAG_SEARCH_ERROR | Tagæœç´¢å¤±è´¥ |
| MIXED_SEARCH_ERROR | æ··åˆæœç´¢å¤±è´¥ |
| CACHE_ERROR | ç¼“å­˜ç³»ç»Ÿé”™è¯¯ |
| USER_NOT_FOUND | ç”¨æˆ·ä¸å­˜åœ¨ |
| CONTENT_NOT_FOUND | å†…å®¹ä¸å­˜åœ¨ |
| SEARCH_HISTORY_ERROR | æœç´¢å†å²æ“ä½œå¤±è´¥ |
| HOT_SEARCH_ERROR | çƒ­é—¨æœç´¢è·å–å¤±è´¥ |
| SUGGESTION_ERROR | æœç´¢å»ºè®®è·å–å¤±è´¥ |
| PREFERENCE_ERROR | ç”¨æˆ·åå¥½è·å–å¤±è´¥ |

---

## ğŸ”„ APIè®¾è®¡åŸåˆ™

### ç»Ÿä¸€å“åº”æ ¼å¼
- **æŸ¥è¯¢æ“ä½œ**: ç›´æ¥è¿”å› `PageResponse<Data>` æ ¼å¼
- **åˆ›å»º/åˆ é™¤æ“ä½œ**: è¿”å› `Result<Void>` æ ¼å¼ï¼ˆä»…çŠ¶æ€ç ï¼‰
- **æ›´æ–°æ“ä½œ**: è¿”å› `Result<Data>` æ ¼å¼ï¼ˆåŒ…å«æ›´æ–°åæ•°æ®ï¼‰

### åˆ†é¡µå‚æ•°è§„èŒƒ
- **currentPage**: å½“å‰é¡µç ï¼Œä»1å¼€å§‹
- **pageSize**: æ¯é¡µå¤§å°ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100
- **total**: æ€»è®°å½•æ•°
- **totalPage**: æ€»é¡µæ•°

### ç¼“å­˜é”®å‘½åè§„èŒƒ
- **æ ¼å¼**: `æ¨¡å—:åŠŸèƒ½:å‚æ•°`
- **ç¤ºä¾‹**: `search:result:keyword:Java:type:content:page:1`
- **è¿‡æœŸç­–ç•¥**: æ ¹æ®æ•°æ®æ›´æ–°é¢‘ç‡è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´

---

**æœ€åæ›´æ–°**: 2024-01-16  
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0.0