# Category æ¨¡å— API æ¥å£æ–‡æ¡£

## ğŸ“‹ ç›®å½•
- [æ¨¡å—æ¦‚è¿°](#æ¨¡å—æ¦‚è¿°)
- [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
- [æ¥å£åˆ—è¡¨](#æ¥å£åˆ—è¡¨)
- [æ•°æ®æ¨¡å‹](#æ•°æ®æ¨¡å‹)
- [é”™è¯¯ç å®šä¹‰](#é”™è¯¯ç å®šä¹‰)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)

---

## ğŸ“š æ¨¡å—æ¦‚è¿°

Category æ¨¡å—æ˜¯ Collide ç¤¾äº¤å¹³å°çš„å†…å®¹åˆ†ç±»ç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨**ä¸¥æ ¼å»è¿è¡¨åŒ–è®¾è®¡**ï¼Œä¸ºå¹³å°å†…å®¹æä¾›å±‚çº§åŒ–çš„åˆ†ç±»ç»„ç»‡ç»“æ„ï¼Œæ”¯æŒå¤šçº§åˆ†ç±»ã€åˆ†ç±»ç»Ÿè®¡ã€æ’åºç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### æ ¸å¿ƒè®¾è®¡åŸåˆ™
- **ä¸¥æ ¼å»è¿è¡¨åŒ–**: æ‰€æœ‰å¿…è¦ä¿¡æ¯å†—ä½™å­˜å‚¨åœ¨å•è¡¨å†…ï¼Œé¿å…å¤æ‚è”è¡¨æŸ¥è¯¢
- **é«˜æ€§èƒ½æŸ¥è¯¢**: åŸºäºå•è¡¨æŸ¥è¯¢ï¼Œå“åº”é€Ÿåº¦å¿«ï¼Œæ‰©å±•æ€§å¥½
- **æ•°æ®ä¸€è‡´æ€§**: é€šè¿‡åº”ç”¨å±‚æ§åˆ¶æ•°æ®ä¸€è‡´æ€§ï¼Œé¿å…æ•°æ®åº“å±‚é¢å¤æ‚çº¦æŸ
- **ç¼“å­˜å‹å¥½**: å•è¡¨æ•°æ®ç»“æ„ä¾¿äºç¼“å­˜è®¾è®¡å’Œç®¡ç†

### ä¸»è¦åŠŸèƒ½
- **å±‚çº§åˆ†ç±»ç®¡ç†**: æ”¯æŒæœ€å¤š5å±‚çš„æ ‘å½¢åˆ†ç±»ç»“æ„
- **åˆ†ç±»CRUDæ“ä½œ**: åˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤åˆ†ç±»
- **åˆ†ç±»æ ‘ç»“æ„**: è·å–å®Œæ•´çš„åˆ†ç±»æ ‘æˆ–æŒ‡å®šèŠ‚ç‚¹çš„å­åˆ†ç±»
- **åˆ†ç±»ç»Ÿè®¡**: å®æ—¶ç»Ÿè®¡æ¯ä¸ªåˆ†ç±»ä¸‹çš„å†…å®¹æ•°é‡
- **çƒ­é—¨åˆ†ç±»**: åŸºäºå†…å®¹æ•°é‡çš„çƒ­é—¨åˆ†ç±»æ¨è
- **åˆ†ç±»æœç´¢**: æ”¯æŒåˆ†ç±»åç§°æ¨¡ç³Šæœç´¢
- **æ’åºç®¡ç†**: æ”¯æŒè‡ªå®šä¹‰åˆ†ç±»æ’åºé¡ºåº
- **å¹‚ç­‰æ€§æ“ä½œ**: æ”¯æŒå¹‚ç­‰æ€§æ›´æ–°å’Œåˆ é™¤æ“ä½œ

### æ”¯æŒçš„åˆ†ç±»å±‚çº§
- **1çº§åˆ†ç±»**: æ ¹åˆ†ç±»ï¼ˆå¦‚ï¼šæŠ€æœ¯ã€ç”Ÿæ´»ã€å¨±ä¹ï¼‰
- **2çº§åˆ†ç±»**: äºŒçº§åˆ†ç±»ï¼ˆå¦‚ï¼šJavaã€Pythonã€å‰ç«¯å¼€å‘ï¼‰
- **3çº§åˆ†ç±»**: ä¸‰çº§åˆ†ç±»ï¼ˆå¦‚ï¼šSpring Bootã€Vue.jsã€Reactï¼‰
- **4-5çº§åˆ†ç±»**: æ›´ç»†ç²’åº¦çš„åˆ†ç±»ç»†åˆ†

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### åˆ†ç±»è¡¨ (t_category) - ä¸¥æ ¼å»è¿è¡¨åŒ–è®¾è®¡

| å­—æ®µå | ç±»å‹ | æ˜¯å¦å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|----------|--------|------|
| id | BIGINT UNSIGNED | æ˜¯ | AUTO_INCREMENT | åˆ†ç±»IDï¼Œä¸»é”® |
| parent_id | BIGINT UNSIGNED | å¦ | 0 | çˆ¶åˆ†ç±»IDï¼Œ0è¡¨ç¤ºæ ¹åˆ†ç±» |
| name | VARCHAR(50) | æ˜¯ | - | åˆ†ç±»åç§° |
| description | VARCHAR(500) | å¦ | - | åˆ†ç±»æè¿° |
| icon_url | VARCHAR(255) | å¦ | - | åˆ†ç±»å›¾æ ‡URL |
| cover_url | VARCHAR(255) | å¦ | - | åˆ†ç±»å°é¢URL |
| sort_order | INT UNSIGNED | å¦ | 0 | æ’åºé¡ºåºï¼Œæ•°å€¼è¶Šå°è¶Šé å‰ |
| level | TINYINT UNSIGNED | æ˜¯ | 1 | åˆ†ç±»å±‚çº§ï¼ˆ1-5ï¼‰ |
| path | VARCHAR(500) | æ˜¯ | '/' | åˆ†ç±»è·¯å¾„ï¼Œç”¨/åˆ†éš” |
| content_count | BIGINT UNSIGNED | æ˜¯ | 0 | è¯¥åˆ†ç±»ä¸‹çš„å†…å®¹æ•°é‡ |
| status | VARCHAR(20) | æ˜¯ | 'ACTIVE' | åˆ†ç±»çŠ¶æ€ï¼šACTIVEã€INACTIVE |
| version | INT UNSIGNED | æ˜¯ | 1 | ç‰ˆæœ¬å·ï¼ˆä¹è§‚é”ï¼‰ |
| creator_id | BIGINT UNSIGNED | å¦ | - | åˆ›å»ºè€…ID |
| creator_name | VARCHAR(50) | å¦ | - | åˆ›å»ºè€…åç§°ï¼ˆå†—ä½™å­˜å‚¨ï¼‰ |
| last_modifier_id | BIGINT UNSIGNED | å¦ | - | æœ€åä¿®æ”¹è€…ID |
| last_modifier_name | VARCHAR(50) | å¦ | - | æœ€åä¿®æ”¹è€…åç§°ï¼ˆå†—ä½™å­˜å‚¨ï¼‰ |
| create_time | TIMESTAMP | æ˜¯ | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| update_time | TIMESTAMP | æ˜¯ | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´ |

### ç´¢å¼•è®¾è®¡
- **ä¸»é”®ç´¢å¼•**: `PRIMARY KEY (id)`
- **å”¯ä¸€ç´¢å¼•**: `UNIQUE KEY uk_parent_name (parent_id, name)`
- **çˆ¶åˆ†ç±»ç´¢å¼•**: `KEY idx_parent_id (parent_id)`
- **çŠ¶æ€ç´¢å¼•**: `KEY idx_status (status)`
- **å±‚çº§ç´¢å¼•**: `KEY idx_level (level)`
- **å†…å®¹æ•°é‡ç´¢å¼•**: `KEY idx_content_count (content_count)`
- **åˆ›å»ºè€…ç´¢å¼•**: `KEY idx_creator_id (creator_id)`
- **æ’åºç´¢å¼•**: `KEY idx_sort_order (sort_order, create_time)`
- **æ—¶é—´ç´¢å¼•**: `KEY idx_create_time (create_time)`, `KEY idx_update_time (update_time)`

---

## ğŸ”— æ¥å£åˆ—è¡¨

### åŸºç¡€åˆ†ç±»ç®¡ç†

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| åˆ›å»ºåˆ†ç±» | POST | `/api/v1/categories` | åˆ›å»ºæ–°çš„åˆ†ç±» |
| æ›´æ–°åˆ†ç±» | PUT | `/api/v1/categories/{categoryId}` | æ›´æ–°æŒ‡å®šåˆ†ç±»ä¿¡æ¯ |
| åˆ é™¤åˆ†ç±» | DELETE | `/api/v1/categories/{categoryId}` | åˆ é™¤æŒ‡å®šåˆ†ç±» |
| æŸ¥è¯¢åˆ†ç±»è¯¦æƒ… | GET | `/api/v1/categories/{categoryId}` | æ ¹æ®IDæŸ¥è¯¢åˆ†ç±»è¯¦æƒ… |

### åˆ†ç±»æŸ¥è¯¢ä¸æœç´¢

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| åˆ†é¡µæŸ¥è¯¢åˆ†ç±» | GET | `/api/v1/categories` | åˆ†é¡µæŸ¥è¯¢åˆ†ç±»åˆ—è¡¨ |
| è·å–åˆ†ç±»æ ‘ | GET | `/api/v1/categories/tree` | è·å–å®Œæ•´åˆ†ç±»æ ‘ç»“æ„ |
| è·å–å­åˆ†ç±»æ ‘ | GET | `/api/v1/categories/tree?parentId={parentId}` | è·å–æŒ‡å®šçˆ¶åˆ†ç±»çš„å­åˆ†ç±»æ ‘ |
| è·å–çƒ­é—¨åˆ†ç±» | GET | `/api/v1/categories/hot` | è·å–çƒ­é—¨åˆ†ç±»åˆ—è¡¨ |
| æœç´¢åˆ†ç±» | GET | `/api/v1/categories/search` | æ ¹æ®å…³é”®è¯æœç´¢åˆ†ç±» |

---

## ğŸ“Š æ¥å£è¯¦æƒ…

### 1. åˆ›å»ºåˆ†ç±»

**æ¥å£åœ°å€**: `POST /api/v1/categories`

**è¯·æ±‚å‚æ•°**:
```json
{
  "parentId": 0,                    // çˆ¶åˆ†ç±»IDï¼Œå¯é€‰ï¼Œé»˜è®¤0ï¼ˆæ ¹åˆ†ç±»ï¼‰
  "name": "æŠ€æœ¯",                   // åˆ†ç±»åç§°ï¼Œå¿…å¡«ï¼Œæœ€å¤§50å­—ç¬¦
  "description": "æŠ€æœ¯ç›¸å…³å†…å®¹åˆ†ç±»", // åˆ†ç±»æè¿°ï¼Œå¯é€‰ï¼Œæœ€å¤§500å­—ç¬¦
  "iconUrl": "https://example.com/tech-icon.png", // å›¾æ ‡URLï¼Œå¯é€‰
  "coverUrl": "https://example.com/tech-cover.jpg", // å°é¢URLï¼Œå¯é€‰
  "sortOrder": 1,                   // æ’åºé¡ºåºï¼Œå¯é€‰ï¼Œé»˜è®¤0
  "sort": 1,                        // æ’åºå€¼ï¼ˆå…¼å®¹æ€§å­—æ®µï¼‰ï¼Œå¯é€‰
  "status": 1,                      // çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-å¯ç”¨ï¼Œå¯é€‰
  "creatorId": 1001,               // åˆ›å»ºè€…IDï¼Œå¯é€‰
  "creatorName": "admin"           // åˆ›å»ºè€…åç§°ï¼Œå¯é€‰ï¼ˆå†—ä½™å­˜å‚¨ï¼‰
}
```

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": 12345,                    // æ–°åˆ›å»ºçš„åˆ†ç±»ID
  "timestamp": 1640995200000,
  "traceId": "trace-123456"
}
```

### 2. æ›´æ–°åˆ†ç±»

**æ¥å£åœ°å€**: `PUT /api/v1/categories/{categoryId}`

**è·¯å¾„å‚æ•°**:
- `categoryId`: åˆ†ç±»ID

**è¯·æ±‚å‚æ•°**:
```json
{
  "name": "æŠ€æœ¯å¼€å‘",               // åˆ†ç±»åç§°ï¼Œå¯é€‰
  "description": "æŠ€æœ¯å¼€å‘ç›¸å…³å†…å®¹", // åˆ†ç±»æè¿°ï¼Œå¯é€‰
  "iconUrl": "https://example.com/new-tech-icon.png", // å›¾æ ‡URLï¼Œå¯é€‰
  "coverUrl": "https://example.com/new-tech-cover.jpg", // å°é¢URLï¼Œå¯é€‰
  "sortOrder": 2,                   // æ’åºé¡ºåºï¼Œå¯é€‰
  "sort": 2,                        // æ’åºå€¼ï¼ˆå…¼å®¹æ€§å­—æ®µï¼‰ï¼Œå¯é€‰
  "status": "ACTIVE",              // çŠ¶æ€ï¼Œå¯é€‰ï¼šACTIVEã€INACTIVE
  "lastModifierId": 1002,          // ä¿®æ”¹è€…IDï¼Œå¯é€‰
  "lastModifierName": "editor"     // ä¿®æ”¹è€…åç§°ï¼Œå¯é€‰ï¼ˆå†—ä½™å­˜å‚¨ï¼‰
}
```

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": null,
  "timestamp": 1640995200000,
  "traceId": "trace-123456"
}
```

### 3. åˆ é™¤åˆ†ç±»

**æ¥å£åœ°å€**: `DELETE /api/v1/categories/{categoryId}`

**è·¯å¾„å‚æ•°**:
- `categoryId`: åˆ†ç±»ID

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": null,
  "timestamp": 1640995200000,
  "traceId": "trace-123456"
}
```

### 4. æŸ¥è¯¢åˆ†ç±»è¯¦æƒ…

**æ¥å£åœ°å€**: `GET /api/v1/categories/{categoryId}`

**è·¯å¾„å‚æ•°**:
- `categoryId`: åˆ†ç±»ID

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "id": 12345,                    // åˆ†ç±»IDï¼ˆå…¼å®¹æ€§å­—æ®µï¼‰
    "categoryId": 12345,            // åˆ†ç±»IDï¼ˆä¸»å­—æ®µï¼‰
    "parentId": 0,
    "name": "æŠ€æœ¯",
    "description": "æŠ€æœ¯ç›¸å…³å†…å®¹åˆ†ç±»",
    "iconUrl": "https://example.com/tech-icon.png",
    "coverUrl": "https://example.com/tech-cover.jpg",
    "sortOrder": 1,
    "sort": 1,                      // æ’åºå€¼ï¼ˆå…¼å®¹æ€§å­—æ®µï¼‰
    "level": 1,
    "path": "/æŠ€æœ¯",
    "contentCount": 1250,
    "status": "ACTIVE",             // åˆ†ç±»çŠ¶æ€ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰
    "statusInt": 1,                 // åˆ†ç±»çŠ¶æ€ï¼ˆæ•´æ•°ç±»å‹ï¼Œå…¼å®¹æ€§å­—æ®µï¼‰
    "version": 1,
    "creatorId": 1001,
    "creatorName": "admin",
    "lastModifierId": 1002,
    "lastModifierName": "editor",
    "createTime": "2024-01-01T10:00:00",
    "updateTime": "2024-01-01T12:00:00"
  },
  "timestamp": 1640995200000,
  "traceId": "trace-123456"
}
```

### 5. åˆ†é¡µæŸ¥è¯¢åˆ†ç±»

**æ¥å£åœ°å€**: `GET /api/v1/categories`

**æŸ¥è¯¢å‚æ•°**:
- `pageNo`: é¡µç ï¼Œé»˜è®¤1
- `pageSize`: æ¯é¡µå¤§å°ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100
- `parentId`: çˆ¶åˆ†ç±»IDï¼Œå¯é€‰
- `level`: åˆ†ç±»å±‚çº§ï¼Œå¯é€‰
- `status`: åˆ†ç±»çŠ¶æ€ï¼Œå¯é€‰ï¼ˆACTIVE/INACTIVEï¼‰
- `name`: åˆ†ç±»åç§°å…³é”®è¯ï¼Œå¯é€‰
- `creatorId`: åˆ›å»ºè€…IDï¼Œå¯é€‰

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "categoryId": 1,
        "parentId": 0,
        "name": "æŠ€æœ¯",
        "description": "æŠ€æœ¯ç›¸å…³å†…å®¹åˆ†ç±»",
        "iconUrl": "https://example.com/tech-icon.png",
        "coverUrl": "https://example.com/tech-cover.jpg",
        "sortOrder": 1,
        "sort": 1,
        "level": 1,
        "path": "/æŠ€æœ¯",
        "contentCount": 5000,
        "status": "ACTIVE",
        "statusInt": 1,
        "version": 1,
        "creatorId": 1001,
        "creatorName": "admin",
        "lastModifierId": null,
        "lastModifierName": null,
        "createTime": "2024-01-01T10:00:00",
        "updateTime": "2024-01-01T10:00:00"
      }
    ],
    "total": 100,
    "pageNo": 1,
    "pageSize": 20,
    "totalPages": 5
  },
  "timestamp": 1640995200000,
  "traceId": "trace-123456"
}
```

### 6. è·å–åˆ†ç±»æ ‘

**æ¥å£åœ°å€**: `GET /api/v1/categories/tree`

**æŸ¥è¯¢å‚æ•°**:
- `parentId`: çˆ¶åˆ†ç±»IDï¼Œå¯é€‰ï¼Œé»˜è®¤nullï¼ˆè·å–å®Œæ•´æ ‘ï¼‰

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "categoryId": 1,
      "parentId": 0,
      "name": "æŠ€æœ¯",
      "description": "æŠ€æœ¯ç›¸å…³å†…å®¹åˆ†ç±»",
      "iconUrl": "https://example.com/tech-icon.png",
      "coverUrl": "https://example.com/tech-cover.jpg",
      "sortOrder": 1,
      "level": 1,
      "path": "/æŠ€æœ¯",
      "contentCount": 5000,
      "status": "ACTIVE",
      "createTime": "2024-01-01T10:00:00",
      "updateTime": "2024-01-01T10:00:00",
      "children": [
        {
          "categoryId": 10,
          "parentId": 1,
          "name": "Java",
          "description": "Javaç¼–ç¨‹è¯­è¨€ç›¸å…³",
          "iconUrl": "https://example.com/java-icon.png",
          "coverUrl": "https://example.com/java-cover.jpg",
          "sortOrder": 1,
          "level": 2,
          "path": "/æŠ€æœ¯/Java",
          "contentCount": 2000,
          "status": "ACTIVE",
          "createTime": "2024-01-01T10:05:00",
          "updateTime": "2024-01-01T10:05:00",
          "children": [
            {
              "categoryId": 100,
              "parentId": 10,
              "name": "Spring Boot",
              "description": "Spring Bootæ¡†æ¶ç›¸å…³",
              "iconUrl": "https://example.com/springboot-icon.png",
              "coverUrl": "https://example.com/springboot-cover.jpg",
              "sortOrder": 1,
              "level": 3,
              "path": "/æŠ€æœ¯/Java/Spring Boot",
              "contentCount": 800,
              "status": "ACTIVE",
              "createTime": "2024-01-01T10:10:00",
              "updateTime": "2024-01-01T10:10:00",
              "children": []
            }
          ]
        }
      ]
    }
  ],
  "timestamp": 1640995200000,
  "traceId": "trace-123456"
}
```

### 7. è·å–çƒ­é—¨åˆ†ç±»

**æ¥å£åœ°å€**: `GET /api/v1/categories/hot`

**æŸ¥è¯¢å‚æ•°**:
- `limit`: è¿”å›æ•°é‡é™åˆ¶ï¼Œé»˜è®¤10ï¼Œæœ€å¤§50

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "id": 1,
      "categoryId": 1,
      "parentId": 0,
      "name": "æŠ€æœ¯",
      "description": "æŠ€æœ¯ç›¸å…³å†…å®¹åˆ†ç±»",
      "iconUrl": "https://example.com/tech-icon.png",
      "coverUrl": "https://example.com/tech-cover.jpg",
      "sortOrder": 1,
      "sort": 1,
      "level": 1,
      "path": "/æŠ€æœ¯",
      "contentCount": 5000,
      "status": "ACTIVE",
      "statusInt": 1,
      "version": 1,
      "creatorId": 1001,
      "creatorName": "admin",
      "createTime": "2024-01-01T10:00:00",
      "updateTime": "2024-01-01T10:00:00"
    }
  ],
  "timestamp": 1640995200000,
  "traceId": "trace-123456"
}
```

### 8. æœç´¢åˆ†ç±»

**æ¥å£åœ°å€**: `GET /api/v1/categories/search`

**æŸ¥è¯¢å‚æ•°**:
- `keyword`: æœç´¢å…³é”®è¯ï¼Œå¿…å¡«
- `limit`: è¿”å›æ•°é‡é™åˆ¶ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": [
    {
      "id": 10,
      "categoryId": 10,
      "parentId": 1,
      "name": "Java",
      "description": "Javaç¼–ç¨‹è¯­è¨€ç›¸å…³",
      "iconUrl": "https://example.com/java-icon.png",
      "coverUrl": "https://example.com/java-cover.jpg",
      "sortOrder": 1,
      "sort": 1,
      "level": 2,
      "path": "/æŠ€æœ¯/Java",
      "contentCount": 2000,
      "status": "ACTIVE",
      "statusInt": 1,
      "version": 1,
      "creatorId": 1001,
      "creatorName": "admin",
      "createTime": "2024-01-01T10:05:00",
      "updateTime": "2024-01-01T10:05:00"
    }
  ],
  "timestamp": 1640995200000,
  "traceId": "trace-123456"
}
```

---

## ğŸ“‹ æ•°æ®æ¨¡å‹

### CategoryInfo - åˆ†ç±»ä¿¡æ¯ï¼ˆä¸¥æ ¼å»è¿è¡¨åŒ–ï¼‰

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | Long | åˆ†ç±»IDï¼ˆå…¼å®¹æ€§å­—æ®µï¼‰ |
| categoryId | Long | åˆ†ç±»IDï¼ˆä¸»å­—æ®µï¼‰ |
| parentId | Long | çˆ¶åˆ†ç±»ID |
| name | String | åˆ†ç±»åç§° |
| description | String | åˆ†ç±»æè¿° |
| iconUrl | String | åˆ†ç±»å›¾æ ‡URL |
| coverUrl | String | åˆ†ç±»å°é¢URL |
| sortOrder | Integer | æ’åºé¡ºåº |
| sort | Integer | æ’åºå€¼ï¼ˆå…¼å®¹æ€§å­—æ®µï¼‰ |
| level | Integer | åˆ†ç±»å±‚çº§ |
| path | String | åˆ†ç±»è·¯å¾„ |
| contentCount | Long | å†…å®¹æ•°é‡ |
| status | String | åˆ†ç±»çŠ¶æ€ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰ |
| statusInt | Integer | åˆ†ç±»çŠ¶æ€ï¼ˆæ•´æ•°ç±»å‹ï¼Œå…¼å®¹æ€§å­—æ®µï¼‰ |
| version | Integer | ç‰ˆæœ¬å·ï¼ˆä¹è§‚é”ï¼‰ |
| creatorId | Long | åˆ›å»ºè€…ID |
| creatorName | String | åˆ›å»ºè€…åç§°ï¼ˆå†—ä½™å­˜å‚¨ï¼‰ |
| lastModifierId | Long | æœ€åä¿®æ”¹è€…ID |
| lastModifierName | String | æœ€åä¿®æ”¹è€…åç§°ï¼ˆå†—ä½™å­˜å‚¨ï¼‰ |
| createTime | LocalDateTime | åˆ›å»ºæ—¶é—´ |
| updateTime | LocalDateTime | æ›´æ–°æ—¶é—´ |

### CategoryTree - åˆ†ç±»æ ‘èŠ‚ç‚¹

ç»§æ‰¿ CategoryInfo çš„æ‰€æœ‰å­—æ®µï¼Œé¢å¤–åŒ…å«ï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| children | List<CategoryTree> | å­åˆ†ç±»åˆ—è¡¨ |

### CategoryCreateRequest - åˆ›å»ºåˆ†ç±»è¯·æ±‚

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| parentId | Long | å¦ | çˆ¶åˆ†ç±»IDï¼Œé»˜è®¤0 |
| name | String | æ˜¯ | åˆ†ç±»åç§°ï¼Œæœ€å¤§50å­—ç¬¦ |
| description | String | å¦ | åˆ†ç±»æè¿°ï¼Œæœ€å¤§500å­—ç¬¦ |
| iconUrl | String | å¦ | åˆ†ç±»å›¾æ ‡URL |
| coverUrl | String | å¦ | åˆ†ç±»å°é¢URL |
| sortOrder | Integer | å¦ | æ’åºé¡ºåºï¼Œé»˜è®¤0 |
| sort | Integer | å¦ | æ’åºå€¼ï¼ˆå…¼å®¹æ€§å­—æ®µï¼‰ |
| status | Integer | å¦ | çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-å¯ç”¨ |
| creatorId | Long | å¦ | åˆ›å»ºè€…ID |
| creatorName | String | å¦ | åˆ›å»ºè€…åç§°ï¼ˆå†—ä½™å­˜å‚¨ï¼‰ |

### CategoryUpdateRequest - æ›´æ–°åˆ†ç±»è¯·æ±‚

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| categoryId | Long | æ˜¯ | åˆ†ç±»ID |
| name | String | å¦ | åˆ†ç±»åç§° |
| description | String | å¦ | åˆ†ç±»æè¿° |
| iconUrl | String | å¦ | åˆ†ç±»å›¾æ ‡URL |
| coverUrl | String | å¦ | åˆ†ç±»å°é¢URL |
| sortOrder | Integer | å¦ | æ’åºé¡ºåº |
| sort | Integer | å¦ | æ’åºå€¼ï¼ˆå…¼å®¹æ€§å­—æ®µï¼‰ |
| status | String | å¦ | çŠ¶æ€ï¼šACTIVEã€INACTIVE |
| lastModifierId | Long | å¦ | ä¿®æ”¹è€…ID |
| lastModifierName | String | å¦ | ä¿®æ”¹è€…åç§°ï¼ˆå†—ä½™å­˜å‚¨ï¼‰ |

### CategoryQueryRequest - åˆ†ç±»æŸ¥è¯¢è¯·æ±‚

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| pageNo | Integer | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| pageSize | Integer | å¦ | æ¯é¡µå¤§å°ï¼Œé»˜è®¤20 |
| parentId | Long | å¦ | çˆ¶åˆ†ç±»ID |
| level | Integer | å¦ | åˆ†ç±»å±‚çº§ |
| status | String | å¦ | åˆ†ç±»çŠ¶æ€ |
| name | String | å¦ | åˆ†ç±»åç§°å…³é”®è¯ |
| creatorId | Long | å¦ | åˆ›å»ºè€…ID |

---

## âŒ é”™è¯¯ç å®šä¹‰

### åˆ†ç±»ç›¸å…³é”™è¯¯ç 

| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|------------|----------|------|
| CATEGORY_NAME_EMPTY | 400 | åˆ†ç±»åç§°ä¸èƒ½ä¸ºç©º | åˆ›å»ºæˆ–æ›´æ–°åˆ†ç±»æ—¶åç§°ä¸ºç©º |
| CATEGORY_NAME_TOO_LONG | 400 | åˆ†ç±»åç§°ä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦ | åˆ†ç±»åç§°è¿‡é•¿ |
| CATEGORY_DESCRIPTION_TOO_LONG | 400 | åˆ†ç±»æè¿°ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦ | åˆ†ç±»æè¿°è¿‡é•¿ |
| CATEGORY_PARENT_NOT_EXISTS | 400 | çˆ¶åˆ†ç±»ä¸å­˜åœ¨ | æŒ‡å®šçš„çˆ¶åˆ†ç±»IDä¸å­˜åœ¨ |
| CATEGORY_LEVEL_EXCEED | 400 | åˆ†ç±»å±‚çº§ä¸èƒ½è¶…è¿‡5å±‚ | åˆ›å»ºåˆ†ç±»æ—¶å±‚çº§è¶…è¿‡é™åˆ¶ |
| CATEGORY_NAME_EXISTS | 409 | è¯¥å±‚çº§ä¸‹åˆ†ç±»åç§°å·²å­˜åœ¨ | åŒä¸€çˆ¶åˆ†ç±»ä¸‹å­˜åœ¨é‡ååˆ†ç±» |
| CATEGORY_NOT_FOUND | 404 | åˆ†ç±»ä¸å­˜åœ¨ | æŒ‡å®šçš„åˆ†ç±»IDä¸å­˜åœ¨ |
| CATEGORY_HAS_CHILDREN | 400 | æ— æ³•åˆ é™¤åŒ…å«å­åˆ†ç±»çš„åˆ†ç±» | å°è¯•åˆ é™¤æœ‰å­åˆ†ç±»çš„åˆ†ç±» |
| CATEGORY_HAS_CONTENT | 400 | æ— æ³•åˆ é™¤åŒ…å«å†…å®¹çš„åˆ†ç±» | å°è¯•åˆ é™¤æœ‰å†…å®¹çš„åˆ†ç±» |
| CATEGORY_CIRCULAR_REFERENCE | 400 | ä¸èƒ½å°†åˆ†ç±»ç§»åŠ¨åˆ°è‡ªå·±çš„å­åˆ†ç±»ä¸‹ | æ›´æ–°åˆ†ç±»æ—¶å½¢æˆå¾ªç¯å¼•ç”¨ |
| CATEGORY_STATUS_INVALID | 400 | åˆ†ç±»çŠ¶æ€æ— æ•ˆ | çŠ¶æ€å€¼ä¸åœ¨æœ‰æ•ˆèŒƒå›´å†… |
| CATEGORY_UPDATE_CONFLICT | 409 | åˆ†ç±»æ›´æ–°å†²çªï¼Œè¯·é‡è¯• | å¹¶å‘æ›´æ–°å¯¼è‡´ç‰ˆæœ¬å†²çª |

### é€šç”¨é”™è¯¯ç 

| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|------------|----------|------|
| INVALID_PARAMETER | 400 | å‚æ•°æ— æ•ˆ | è¯·æ±‚å‚æ•°æ ¼å¼é”™è¯¯ |
| RESOURCE_NOT_FOUND | 404 | èµ„æºä¸å­˜åœ¨ | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ |
| DUPLICATED | 409 | èµ„æºé‡å¤ | èµ„æºå·²å­˜åœ¨ |
| SYSTEM_ERROR | 500 | ç³»ç»Ÿå†…éƒ¨é”™è¯¯ | æœåŠ¡å™¨å†…éƒ¨å¼‚å¸¸ |

---

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### 1. åˆ›å»ºä¸€çº§åˆ†ç±»ï¼ˆæŠ€æœ¯ï¼‰

```bash
curl -X POST http://localhost:9505/api/v1/categories \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {token}" \
  -d '{
    "parentId": 0,
    "name": "æŠ€æœ¯",
    "description": "æŠ€æœ¯ç›¸å…³å†…å®¹åˆ†ç±»",
    "iconUrl": "https://example.com/tech-icon.png",
    "sortOrder": 1,
    "sort": 1,
    "status": 1,
    "creatorId": 1001,
    "creatorName": "admin"
  }'
```

### 2. åˆ›å»ºäºŒçº§åˆ†ç±»ï¼ˆJavaï¼‰

```bash
curl -X POST http://localhost:9505/api/v1/categories \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {token}" \
  -d '{
    "parentId": 1,
    "name": "Java",
    "description": "Javaç¼–ç¨‹è¯­è¨€ç›¸å…³",
    "iconUrl": "https://example.com/java-icon.png",
    "sortOrder": 1,
    "sort": 1,
    "creatorId": 1001,
    "creatorName": "admin"
  }'
```

### 3. æ›´æ–°åˆ†ç±»

```bash
curl -X PUT http://localhost:9505/api/v1/categories/1 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer {token}" \
  -d '{
    "name": "æŠ€æœ¯å¼€å‘",
    "description": "æŠ€æœ¯å¼€å‘ç›¸å…³å†…å®¹",
    "sortOrder": 2,
    "sort": 2,
    "status": "ACTIVE",
    "lastModifierId": 1002,
    "lastModifierName": "editor"
  }'
```

### 4. è·å–å®Œæ•´åˆ†ç±»æ ‘

```bash
curl -X GET "http://localhost:9505/api/v1/categories/tree" \
  -H "Authorization: Bearer {token}"
```

### 5. æœç´¢åˆ†ç±»

```bash
curl -X GET "http://localhost:9505/api/v1/categories/search?keyword=Java&limit=10" \
  -H "Authorization: Bearer {token}"
```

### 6. è·å–çƒ­é—¨åˆ†ç±»

```bash
curl -X GET "http://localhost:9505/api/v1/categories/hot?limit=10" \
  -H "Authorization: Bearer {token}"
```

### 7. åˆ†é¡µæŸ¥è¯¢åˆ†ç±»

```bash
curl -X GET "http://localhost:9505/api/v1/categories?pageNo=1&pageSize=20&parentId=1&status=ACTIVE" \
  -H "Authorization: Bearer {token}"
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### è®¾è®¡åŸåˆ™
1. **ä¸¥æ ¼å»è¿è¡¨åŒ–**: æ‰€æœ‰æŸ¥è¯¢åŸºäºå•è¡¨ï¼Œé¿å…JOINæ“ä½œ
2. **å†—ä½™å­˜å‚¨**: åˆ›å»ºè€…ã€ä¿®æ”¹è€…ç­‰ä¿¡æ¯å†—ä½™å­˜å‚¨ï¼Œé¿å…å…³è”æŸ¥è¯¢
3. **åº”ç”¨å±‚æ§åˆ¶**: æ•°æ®ä¸€è‡´æ€§é€šè¿‡ä¸šåŠ¡é€»è¾‘å±‚æ§åˆ¶
4. **ä¹è§‚é”æœºåˆ¶**: ä½¿ç”¨versionå­—æ®µå®ç°å¹¶å‘æ§åˆ¶å’Œå¹‚ç­‰æ€§
5. **å…¼å®¹æ€§è®¾è®¡**: æä¾›å¤šç§å­—æ®µæ ¼å¼ä»¥æ”¯æŒä¸åŒå®¢æˆ·ç«¯éœ€æ±‚

### ä¸šåŠ¡è§„åˆ™
1. **å±‚çº§é™åˆ¶**: åˆ†ç±»æœ€å¤šæ”¯æŒ5å±‚ï¼Œè¶…è¿‡æ­¤é™åˆ¶çš„åˆ›å»ºè¯·æ±‚ä¼šè¢«æ‹’ç»
2. **åç§°å”¯ä¸€æ€§**: åŒä¸€çˆ¶åˆ†ç±»ä¸‹çš„å­åˆ†ç±»åç§°å¿…é¡»å”¯ä¸€
3. **åˆ é™¤é™åˆ¶**: åŒ…å«å­åˆ†ç±»æˆ–å†…å®¹çš„åˆ†ç±»æ— æ³•ç›´æ¥åˆ é™¤ï¼Œéœ€è¦å…ˆæ¸…ç†å­åˆ†ç±»å’Œå†…å®¹
4. **çŠ¶æ€ç®¡ç†**: ç¦ç”¨çˆ¶åˆ†ç±»ä¼šå½±å“å…¶ä¸‹æ‰€æœ‰å­åˆ†ç±»çš„å¯è§æ€§
5. **æ’åºè§„åˆ™**: sortOrder æ•°å€¼è¶Šå°æ’åºè¶Šé å‰ï¼Œç›¸åŒæ•°å€¼æŒ‰åˆ›å»ºæ—¶é—´æ’åº
6. **è·¯å¾„æ ¼å¼**: åˆ†ç±»è·¯å¾„ä»¥/åˆ†éš”ï¼Œæ ¼å¼ä¸º `/parent1/parent2/parent3`

### æ€§èƒ½ä¼˜åŒ–
1. **å•è¡¨æŸ¥è¯¢**: æ‰€æœ‰æŸ¥è¯¢éƒ½æ˜¯å•è¡¨æ“ä½œï¼Œæ€§èƒ½ä¼˜å¼‚
2. **ç´¢å¼•ä¼˜åŒ–**: åŸºäºæŸ¥è¯¢åœºæ™¯è®¾è®¡äº†å®Œæ•´çš„ç´¢å¼•ç»“æ„
3. **ç¼“å­˜å‹å¥½**: å•è¡¨æ•°æ®ç»“æ„ä¾¿äºRedisç¼“å­˜
4. **åˆ†é¡µé™åˆ¶**: åˆ†é¡µæŸ¥è¯¢æœ€å¤§pageSizeä¸º100ï¼Œé¿å…å¤§æ‰¹é‡æ•°æ®æŸ¥è¯¢

### æ•°æ®ä¸€è‡´æ€§
1. **å†—ä½™æ•°æ®åŒæ­¥**: å½“ç”¨æˆ·ä¿¡æ¯å˜æ›´æ—¶ï¼Œéœ€è¦åŒæ­¥æ›´æ–°åˆ†ç±»è¡¨ä¸­çš„å†—ä½™å­—æ®µ
2. **å†…å®¹æ•°é‡ç»Ÿè®¡**: content_countå­—æ®µéœ€è¦åœ¨å†…å®¹å‘å¸ƒ/åˆ é™¤æ—¶å¼‚æ­¥æ›´æ–°
3. **å¹‚ç­‰æ€§ä¿è¯**: é€šè¿‡versionå­—æ®µå’Œåº”ç”¨å±‚é€»è¾‘ä¿è¯æ“ä½œå¹‚ç­‰æ€§

### å…¼å®¹æ€§è¯´æ˜
1. **åŒå­—æ®µæ”¯æŒ**: `id`/`categoryId`ã€`sort`/`sortOrder`ã€`status`/`statusInt` ç­‰åŒå­—æ®µè®¾è®¡ä¿è¯æ–°è€å®¢æˆ·ç«¯å…¼å®¹
2. **ç±»å‹è½¬æ¢**: çŠ¶æ€å­—æ®µæ”¯æŒå­—ç¬¦ä¸²å’Œæ•´æ•°ä¸¤ç§ç±»å‹ï¼Œè‡ªåŠ¨è½¬æ¢
3. **å¯é€‰å­—æ®µ**: å…¼å®¹æ€§å­—æ®µå‡ä¸ºå¯é€‰ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½ä½¿ç”¨

---

**æ–‡æ¡£ç‰ˆæœ¬**: 2.1.0 - å®Œæ•´å…¼å®¹æ€§ç‰ˆæœ¬  
**æœ€åæ›´æ–°**: 2024-12-28  
**ç»´æŠ¤å›¢é˜Ÿ**: Collide Backend Team  
**è®¾è®¡ç†å¿µ**: No JOIN, High Performance, Simple & Fast, Full Compatibility