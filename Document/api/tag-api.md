# Tag æ¨¡å— API æ¥å£æ–‡æ¡£

> **âš ï¸ é‡è¦è¯´æ˜**: Tag æ¨¡å—é‡‡ç”¨å¼ºåˆ¶å»è¿è¡¨è®¾è®¡ï¼ˆNo-Join Designï¼‰ï¼Œæ‰€æœ‰æŸ¥è¯¢å‡åŸºäºå•è¡¨æ“ä½œã€‚
> API å“åº”ä¸­ä¸åŒ…å«ä»»ä½•è¿è¡¨æŸ¥è¯¢çš„å†—ä½™å­—æ®µï¼ˆå¦‚ categoryName ç­‰ï¼‰ï¼Œå¦‚éœ€å…³è”æ•°æ®è¯·é€šè¿‡å•ç‹¬çš„ API è°ƒç”¨è·å–ã€‚

## ğŸ“‹ ç›®å½•
- [æ¨¡å—æ¦‚è¿°](#æ¨¡å—æ¦‚è¿°)
- [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
- [æ¥å£åˆ—è¡¨](#æ¥å£åˆ—è¡¨)
- [æ•°æ®æ¨¡å‹](#æ•°æ®æ¨¡å‹)
- [é”™è¯¯ç å®šä¹‰](#é”™è¯¯ç å®šä¹‰)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)

---

## ğŸ“š æ¨¡å—æ¦‚è¿°

Tag æ¨¡å—æ˜¯ Collide ç¤¾äº¤å¹³å°çš„æ ‡ç­¾ç®¡ç†ç³»ç»Ÿï¼Œæä¾›æ ‡ç­¾çš„åˆ›å»ºã€ç®¡ç†å’Œç”¨æˆ·å…´è¶£æ ‡ç­¾çš„ä¸ªæ€§åŒ–æ¨èåŠŸèƒ½ï¼Œæ”¯æŒå†…å®¹æ ‡ç­¾åŒ–ã€ç”¨æˆ·å…´è¶£ç”»åƒæ„å»ºå’Œæ™ºèƒ½å†…å®¹æ¨èã€‚

### ä¸»è¦åŠŸèƒ½
- **æ ‡ç­¾ç®¡ç†**: åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢æ ‡ç­¾ä¿¡æ¯
- **æ ‡ç­¾åˆ†ç±»**: æ”¯æŒå†…å®¹æ ‡ç­¾ã€å…´è¶£æ ‡ç­¾ã€ç³»ç»Ÿæ ‡ç­¾ä¸‰å¤§ç±»å‹
- **çƒ­åº¦è®¡ç®—**: åŸºäºä½¿ç”¨é¢‘æ¬¡çš„æ ‡ç­¾çƒ­åº¦ç®—æ³•
- **ç”¨æˆ·å…´è¶£**: ç”¨æˆ·å…´è¶£æ ‡ç­¾ç®¡ç†å’Œå…´è¶£ç”»åƒæ„å»º
- **æ™ºèƒ½æ¨è**: åŸºäºæ ‡ç­¾çš„å†…å®¹æ¨èå’Œç”¨æˆ·åŒ¹é…
- **æ ‡ç­¾æœç´¢**: æ”¯æŒæ ‡ç­¾åç§°çš„æ¨¡ç³Šæœç´¢
- **è§†è§‰å®šåˆ¶**: æ”¯æŒæ ‡ç­¾é¢œè‰²å’Œå›¾æ ‡çš„è‡ªå®šä¹‰è®¾ç½®

### æ”¯æŒçš„æ ‡ç­¾ç±»å‹
- **CONTENT**: å†…å®¹æ ‡ç­¾ï¼Œç”¨äºå†…å®¹åˆ†ç±»å’Œæ ‡è®°
- **INTEREST**: å…´è¶£æ ‡ç­¾ï¼Œç”¨äºç”¨æˆ·å…´è¶£ç®¡ç†
- **SYSTEM**: ç³»ç»Ÿæ ‡ç­¾ï¼Œå¹³å°é¢„è®¾çš„åŠŸèƒ½æ€§æ ‡ç­¾

### æŠ€æœ¯ç‰¹è‰²
- **å»è¿è¡¨è®¾è®¡**: å¼ºåˆ¶é‡‡ç”¨å•è¡¨æŸ¥è¯¢ï¼Œé¿å…å¤æ‚çš„è¿è¡¨æ“ä½œ
- **é«˜æ€§èƒ½æŸ¥è¯¢**: åŸºäºç´¢å¼•ä¼˜åŒ–çš„å¿«é€Ÿå•è¡¨æŸ¥è¯¢
- **çƒ­åº¦ç®—æ³•**: åŸºäºä½¿ç”¨æ¬¡æ•°å’Œæ—¶é—´è¡°å‡çš„çƒ­åº¦è®¡ç®—
- **å…´è¶£ç”»åƒ**: ç”¨æˆ·å¤šç»´åº¦å…´è¶£åå¥½å»ºæ¨¡
- **æ™ºèƒ½æ¨è**: ååŒè¿‡æ»¤å’Œå†…å®¹åŒ¹é…ç®—æ³•
- **ç¼“å­˜ä¼˜åŒ–**: çƒ­é—¨æ ‡ç­¾å’Œç”¨æˆ·å…´è¶£çš„ç¼“å­˜ç­–ç•¥

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### æ ‡ç­¾è¡¨ (t_tag)

| å­—æ®µå | ç±»å‹ | æ˜¯å¦å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|----------|--------|------|
| id | BIGINT | æ˜¯ | AUTO_INCREMENT | æ ‡ç­¾IDï¼Œä¸»é”® |
| name | VARCHAR(100) | æ˜¯ | - | æ ‡ç­¾åç§° |
| description | TEXT | å¦ | - | æ ‡ç­¾æè¿° |
| color | VARCHAR(20) | å¦ | #1890ff | æ ‡ç­¾é¢œè‰²ï¼ˆåå…­è¿›åˆ¶ï¼‰ |
| icon_url | VARCHAR(500) | å¦ | - | æ ‡ç­¾å›¾æ ‡URL |
| tag_type | ENUM | æ˜¯ | content | æ ‡ç­¾ç±»å‹ï¼šcontentã€interestã€system |
| category_id | BIGINT | å¦ | - | æ‰€å±åˆ†ç±»IDï¼ˆä»…å­˜å‚¨IDï¼Œä¸åšè¿è¡¨æŸ¥è¯¢ï¼‰ |
| usage_count | BIGINT | æ˜¯ | 0 | ä½¿ç”¨æ¬¡æ•° |
| heat_score | DECIMAL(10,2) | æ˜¯ | 0.00 | çƒ­åº¦åˆ†æ•° |
| status | ENUM | æ˜¯ | active | æ ‡ç­¾çŠ¶æ€ï¼šactiveã€inactive |
| create_time | TIMESTAMP | æ˜¯ | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| update_time | TIMESTAMP | æ˜¯ | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´ |

### ç”¨æˆ·å…´è¶£æ ‡ç­¾è¡¨ (t_user_interest_tag)

| å­—æ®µå | ç±»å‹ | æ˜¯å¦å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|----------|--------|------|
| id | BIGINT | æ˜¯ | AUTO_INCREMENT | è®°å½•IDï¼Œä¸»é”® |
| user_id | BIGINT | æ˜¯ | - | ç”¨æˆ·IDï¼ˆä»…å­˜å‚¨IDï¼Œä¸åšè¿è¡¨æŸ¥è¯¢ï¼‰ |
| tag_id | BIGINT | æ˜¯ | - | æ ‡ç­¾IDï¼ˆä»…å­˜å‚¨IDï¼Œä¸åšè¿è¡¨æŸ¥è¯¢ï¼‰ |
| interest_score | DECIMAL(5,2) | æ˜¯ | 0.00 | å…´è¶£åˆ†æ•°ï¼ˆ0-100ï¼‰ |
| interest_source | VARCHAR(50) | æ˜¯ | - | å…´è¶£æ¥æºï¼šmanualã€behaviorã€system |
| create_time | TIMESTAMP | æ˜¯ | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| update_time | TIMESTAMP | æ˜¯ | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´ |

### ç´¢å¼•è®¾è®¡
- **æ ‡ç­¾è¡¨ç´¢å¼•**:
  - `PRIMARY KEY (id)`
  - `UNIQUE KEY uk_name_type (name, tag_type)`
  - `KEY idx_tag_type (tag_type)`
  - `KEY idx_category_id (category_id)`
  - `KEY idx_usage_count (usage_count)`
  - `KEY idx_heat_score (heat_score)`
- **ç”¨æˆ·å…´è¶£æ ‡ç­¾è¡¨ç´¢å¼•**:
  - `PRIMARY KEY (id)`
  - `UNIQUE KEY uk_user_tag (user_id, tag_id)`
  - `KEY idx_user_id (user_id)`
  - `KEY idx_tag_id (tag_id)`
  - `KEY idx_interest_score (interest_score)`

---

## ğŸ”— æ¥å£åˆ—è¡¨

### æ ‡ç­¾ç®¡ç†

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| åˆ›å»ºæ ‡ç­¾ | POST | `/api/v1/tags` | åˆ›å»ºæ–°çš„æ ‡ç­¾ |
| æ›´æ–°æ ‡ç­¾ | PUT | `/api/v1/tags/{tagId}` | æ›´æ–°æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ |
| åˆ é™¤æ ‡ç­¾ | DELETE | `/api/v1/tags/{tagId}` | åˆ é™¤æŒ‡å®šæ ‡ç­¾ |
| æŸ¥è¯¢æ ‡ç­¾è¯¦æƒ… | GET | `/api/v1/tags/{tagId}` | æ ¹æ®IDæŸ¥è¯¢æ ‡ç­¾è¯¦æƒ… |

### æ ‡ç­¾æŸ¥è¯¢ä¸æœç´¢

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| åˆ†é¡µæŸ¥è¯¢æ ‡ç­¾ | GET | `/api/v1/tags` | åˆ†é¡µæŸ¥è¯¢æ ‡ç­¾åˆ—è¡¨ |
| æŒ‰ç±»å‹æŸ¥è¯¢æ ‡ç­¾ | GET | `/api/v1/tags/type/{tagType}` | æŸ¥è¯¢æŒ‡å®šç±»å‹çš„æ ‡ç­¾ |
| è·å–çƒ­é—¨æ ‡ç­¾ | GET | `/api/v1/tags/hot` | è·å–çƒ­é—¨æ ‡ç­¾åˆ—è¡¨ |
| æœç´¢æ ‡ç­¾ | GET | `/api/v1/tags/search` | æ ¹æ®å…³é”®è¯æœç´¢æ ‡ç­¾ |

### ç”¨æˆ·å…´è¶£æ ‡ç­¾

| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| è·å–ç”¨æˆ·å…´è¶£æ ‡ç­¾ | GET | `/api/v1/tags/interest/{userId}` | è·å–ç”¨æˆ·çš„å…´è¶£æ ‡ç­¾ |
| è®¾ç½®ç”¨æˆ·å…´è¶£æ ‡ç­¾ | POST | `/api/v1/tags/interest/{userId}` | æ‰¹é‡è®¾ç½®ç”¨æˆ·å…´è¶£æ ‡ç­¾ |
| æ·»åŠ ç”¨æˆ·å…´è¶£æ ‡ç­¾ | POST | `/api/v1/tags/interest/{userId}/{tagId}` | æ·»åŠ å•ä¸ªç”¨æˆ·å…´è¶£æ ‡ç­¾ |
| ç§»é™¤ç”¨æˆ·å…´è¶£æ ‡ç­¾ | DELETE | `/api/v1/tags/interest/{userId}/{tagId}` | ç§»é™¤ç”¨æˆ·å…´è¶£æ ‡ç­¾ |

---

## ğŸ“Š æ¥å£è¯¦æƒ…

### 1. åˆ›å»ºæ ‡ç­¾

**æ¥å£åœ°å€**: `POST /api/v1/tags`

**è¯·æ±‚å‚æ•°**:
```json
{
  "name": "äººå·¥æ™ºèƒ½",                           // æ ‡ç­¾åç§°ï¼Œå¿…å¡«
  "description": "äººå·¥æ™ºèƒ½ç›¸å…³çš„å†…å®¹å’ŒæŠ€æœ¯",    // æ ‡ç­¾æè¿°ï¼Œå¯é€‰
  "color": "#FF6B6B",                          // æ ‡ç­¾é¢œè‰²ï¼Œå¯é€‰ï¼Œé»˜è®¤#1890ff
  "iconUrl": "https://example.com/ai-icon.png", // æ ‡ç­¾å›¾æ ‡URLï¼Œå¯é€‰
  "tagType": "content",                        // æ ‡ç­¾ç±»å‹ï¼Œå¿…å¡«ï¼šcontent/interest/system
  "categoryId": 123,                           // æ‰€å±åˆ†ç±»IDï¼Œå¯é€‰
  "sort": 1,                                   // æ’åºå€¼ï¼Œå¯é€‰ï¼Œé»˜è®¤0
  "status": 1                                  // çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-å¯ç”¨ï¼Œå¯é€‰ï¼Œé»˜è®¤1
}
```

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "åˆ›å»ºæˆåŠŸ",
  "data": 12345,                               // æ–°åˆ›å»ºçš„æ ‡ç­¾ID
  "timestamp": 1705312200000,
  "traceId": "trace-123456"
}
```

### 2. æ›´æ–°æ ‡ç­¾

**æ¥å£åœ°å€**: `PUT /api/v1/tags/{tagId}`

**è·¯å¾„å‚æ•°**:
- `tagId`: æ ‡ç­¾ID

**è¯·æ±‚å‚æ•°**:
```json
{
  "name": "äººå·¥æ™ºèƒ½AI",                        // æ›´æ–°çš„æ ‡ç­¾åç§°ï¼Œå¯é€‰
  "description": "AIäººå·¥æ™ºèƒ½æŠ€æœ¯ä¸åº”ç”¨",       // æ›´æ–°çš„æè¿°ï¼Œå¯é€‰
  "color": "#4ECDC4",                          // æ›´æ–°çš„é¢œè‰²ï¼Œå¯é€‰
  "iconUrl": "https://example.com/new-ai-icon.png", // æ›´æ–°çš„å›¾æ ‡ï¼Œå¯é€‰
  "categoryId": 456,                           // æ›´æ–°çš„åˆ†ç±»IDï¼Œå¯é€‰
  "sort": 2,                                   // æ›´æ–°çš„æ’åºå€¼ï¼Œå¯é€‰
  "status": 1                                  // æ›´æ–°çš„çŠ¶æ€ï¼Œå¯é€‰
}
```

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null,
  "timestamp": 1705314000000,
  "traceId": "trace-123456"
}
```

### 3. åˆ é™¤æ ‡ç­¾

**æ¥å£åœ°å€**: `DELETE /api/v1/tags/{tagId}`

**è·¯å¾„å‚æ•°**:
- `tagId`: æ ‡ç­¾ID

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null,
  "timestamp": 1705314000000,
  "traceId": "trace-123456"
}
```

### 4. æŸ¥è¯¢æ ‡ç­¾è¯¦æƒ…

**æ¥å£åœ°å€**: `GET /api/v1/tags/{tagId}`

**è·¯å¾„å‚æ•°**:
- `tagId`: æ ‡ç­¾ID

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 12345,
    "tagId": 12345,
    "name": "äººå·¥æ™ºèƒ½",
    "description": "äººå·¥æ™ºèƒ½ç›¸å…³çš„å†…å®¹å’ŒæŠ€æœ¯",
    "color": "#FF6B6B",
    "iconUrl": "https://example.com/ai-icon.png",
    "tagType": "content",
    "categoryId": 123,
    "usageCount": 1500,
    "heatScore": 85.5,
    "status": "active",
    "createTime": "2024-01-15T10:30:00",
    "updateTime": "2024-01-15T10:30:00"
  },
  "timestamp": 1705312200000,
  "traceId": "trace-123456"
}
```

### 5. åˆ†é¡µæŸ¥è¯¢æ ‡ç­¾

**æ¥å£åœ°å€**: `GET /api/v1/tags`

**æŸ¥è¯¢å‚æ•°**:
- `pageNo`: é¡µç ï¼Œé»˜è®¤1
- `pageSize`: æ¯é¡µå¤§å°ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100
- `tagType`: æ ‡ç­¾ç±»å‹ï¼Œå¯é€‰
- `categoryId`: åˆ†ç±»IDï¼Œå¯é€‰
- `status`: çŠ¶æ€ï¼Œå¯é€‰ï¼ˆactive/inactiveï¼‰
- `keyword`: å…³é”®è¯æœç´¢ï¼Œå¯é€‰
- `sortBy`: æ’åºå­—æ®µï¼Œé»˜è®¤createTime
- `sortOrder`: æ’åºæ–¹å‘ï¼Œé»˜è®¤DESC

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "records": [
      {
        "id": 1,
        "tagId": 1,
        "name": "äººå·¥æ™ºèƒ½",
        "description": "AIç›¸å…³æŠ€æœ¯",
        "color": "#FF6B6B",
        "iconUrl": "https://example.com/ai-icon.png",
        "tagType": "content",
        "categoryId": 123,
        "categoryName": "ç§‘æŠ€",
        "usageCount": 1500,
        "heatScore": 85.5,
        "status": "active",
        "createTime": "2024-01-15T10:30:00",
        "updateTime": "2024-01-15T10:30:00"
      }
    ],
    "total": 150,
    "pageNo": 1,
    "pageSize": 20,
    "totalPages": 8,
    "hasNext": true,
    "hasPrev": false
  },
  "timestamp": 1705312200000,
  "traceId": "trace-123456"
}
```

### 6. æŒ‰ç±»å‹æŸ¥è¯¢æ ‡ç­¾

**æ¥å£åœ°å€**: `GET /api/v1/tags/type/{tagType}`

**è·¯å¾„å‚æ•°**:
- `tagType`: æ ‡ç­¾ç±»å‹ï¼ˆcontent/interest/systemï¼‰

**æŸ¥è¯¢å‚æ•°**:
- `limit`: è¿”å›æ•°é‡é™åˆ¶ï¼Œé»˜è®¤50ï¼Œæœ€å¤§200
- `sortBy`: æ’åºå­—æ®µï¼Œé»˜è®¤heatScore
- `sortOrder`: æ’åºæ–¹å‘ï¼Œé»˜è®¤DESC

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "tagId": 1,
      "name": "äººå·¥æ™ºèƒ½",
      "description": "AIç›¸å…³æŠ€æœ¯",
      "color": "#FF6B6B",
      "iconUrl": "https://example.com/ai-icon.png",
      "tagType": "content",
      "categoryId": 123,
      "categoryName": "ç§‘æŠ€",
      "usageCount": 1500,
      "heatScore": 85.5,
      "status": "active",
      "createTime": "2024-01-15T10:30:00",
      "updateTime": "2024-01-15T10:30:00"
    }
  ],
  "timestamp": 1705312200000,
  "traceId": "trace-123456"
}
```

### 7. è·å–çƒ­é—¨æ ‡ç­¾

**æ¥å£åœ°å€**: `GET /api/v1/tags/hot`

**æŸ¥è¯¢å‚æ•°**:
- `tagType`: æ ‡ç­¾ç±»å‹ï¼Œå¯é€‰
- `limit`: è¿”å›æ•°é‡é™åˆ¶ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100
- `timeRange`: æ—¶é—´èŒƒå›´ï¼Œå¯é€‰å€¼ï¼š7dã€30dã€90dï¼Œé»˜è®¤30d

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "tagId": 1,
      "name": "äººå·¥æ™ºèƒ½",
      "description": "AIç›¸å…³æŠ€æœ¯",
      "color": "#FF6B6B",
      "iconUrl": "https://example.com/ai-icon.png",
      "tagType": "content",
      "categoryId": 123,
      "categoryName": "ç§‘æŠ€",
      "usageCount": 1500,
      "heatScore": 98.5,
      "status": "active",
      "createTime": "2024-01-15T10:30:00",
      "updateTime": "2024-01-15T10:30:00"
    },
    {
      "id": 2,
      "tagId": 2,
      "name": "æœºå™¨å­¦ä¹ ",
      "description": "MLæœºå™¨å­¦ä¹ æŠ€æœ¯",
      "color": "#4ECDC4",
      "iconUrl": "https://example.com/ml-icon.png",
      "tagType": "content",
      "categoryId": 123,
      "categoryName": "ç§‘æŠ€",
      "usageCount": 1200,
      "heatScore": 92.3,
      "status": "active",
      "createTime": "2024-01-15T09:30:00",
      "updateTime": "2024-01-15T09:30:00"
    }
  ],
  "timestamp": 1705312200000,
  "traceId": "trace-123456"
}
```

### 8. æœç´¢æ ‡ç­¾

**æ¥å£åœ°å€**: `GET /api/v1/tags/search`

**æŸ¥è¯¢å‚æ•°**:
- `keyword`: æœç´¢å…³é”®è¯ï¼Œå¿…å¡«
- `tagType`: æ ‡ç­¾ç±»å‹ï¼Œå¯é€‰
- `limit`: è¿”å›æ•°é‡é™åˆ¶ï¼Œé»˜è®¤20ï¼Œæœ€å¤§100

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "tagId": 1,
      "name": "äººå·¥æ™ºèƒ½",
      "description": "AIç›¸å…³æŠ€æœ¯",
      "color": "#FF6B6B",
      "iconUrl": "https://example.com/ai-icon.png",
      "tagType": "content",
      "categoryId": 123,
      "categoryName": "ç§‘æŠ€",
      "usageCount": 1500,
      "heatScore": 85.5,
      "status": "active",
      "createTime": "2024-01-15T10:30:00",
      "updateTime": "2024-01-15T10:30:00"
    }
  ],
  "timestamp": 1705312200000,
  "traceId": "trace-123456"
}
```

### 9. è·å–ç”¨æˆ·å…´è¶£æ ‡ç­¾

**æ¥å£åœ°å€**: `GET /api/v1/tags/interest/{userId}`

**è·¯å¾„å‚æ•°**:
- `userId`: ç”¨æˆ·ID

**æŸ¥è¯¢å‚æ•°**:
- `limit`: è¿”å›æ•°é‡é™åˆ¶ï¼Œé»˜è®¤50ï¼Œæœ€å¤§200
- `minScore`: å…´è¶£åˆ†æ•°ä¸‹é™ï¼Œé»˜è®¤0
- `sortBy`: æ’åºå­—æ®µï¼Œé»˜è®¤interestScore
- `sortOrder`: æ’åºæ–¹å‘ï¼Œé»˜è®¤DESC

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": [
    {
      "id": 1,
      "tagId": 1,
      "name": "äººå·¥æ™ºèƒ½",
      "description": "AIç›¸å…³æŠ€æœ¯",
      "color": "#FF6B6B",
      "iconUrl": "https://example.com/ai-icon.png",
      "tagType": "interest",
      "categoryId": 123,
      "categoryName": "ç§‘æŠ€",
      "usageCount": 1500,
      "heatScore": 85.5,
      "status": "active",
      "interestScore": 95.5,
      "interestSource": "behavior",
      "createTime": "2024-01-15T10:30:00",
      "updateTime": "2024-01-15T10:30:00"
    },
    {
      "id": 2,
      "tagId": 2,
      "name": "æ‘„å½±",
      "description": "æ‘„å½±æŠ€æœ¯ä¸è‰ºæœ¯",
      "color": "#45B7D1",
      "iconUrl": "https://example.com/photo-icon.png",
      "tagType": "interest",
      "categoryId": 456,
      "categoryName": "è‰ºæœ¯",
      "usageCount": 800,
      "heatScore": 75.2,
      "status": "active",
      "interestScore": 88.0,
      "interestSource": "manual",
      "createTime": "2024-01-15T09:30:00",
      "updateTime": "2024-01-15T09:30:00"
    }
  ],
  "timestamp": 1705312200000,
  "traceId": "trace-123456"
}
```

### 10. è®¾ç½®ç”¨æˆ·å…´è¶£æ ‡ç­¾

**æ¥å£åœ°å€**: `POST /api/v1/tags/interest/{userId}`

**è·¯å¾„å‚æ•°**:
- `userId`: ç”¨æˆ·ID

**è¯·æ±‚å‚æ•°**:
```json
{
  "tagIds": [1, 2, 3, 4, 5],                   // æ ‡ç­¾IDåˆ—è¡¨ï¼Œå¿…å¡«
  "interestScore": 80.0,                        // é»˜è®¤å…´è¶£åˆ†æ•°ï¼Œå¯é€‰ï¼Œé»˜è®¤50.0
  "interestSource": "manual",                   // å…´è¶£æ¥æºï¼Œå¯é€‰ï¼Œé»˜è®¤manual
  "replaceAll": true                           // æ˜¯å¦æ›¿æ¢æ‰€æœ‰å…´è¶£æ ‡ç­¾ï¼Œå¯é€‰ï¼Œé»˜è®¤false
}
```

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "è®¾ç½®æˆåŠŸ",
  "data": {
    "userId": 123456,
    "totalTags": 5,
    "successCount": 5,
    "failureCount": 0,
    "results": [
      {
        "tagId": 1,
        "success": true,
        "message": "è®¾ç½®æˆåŠŸ"
      },
      {
        "tagId": 2,
        "success": true,
        "message": "è®¾ç½®æˆåŠŸ"
      }
    ]
  },
  "timestamp": 1705312200000,
  "traceId": "trace-123456"
}
```

### 11. æ·»åŠ ç”¨æˆ·å…´è¶£æ ‡ç­¾

**æ¥å£åœ°å€**: `POST /api/v1/tags/interest/{userId}/{tagId}`

**è·¯å¾„å‚æ•°**:
- `userId`: ç”¨æˆ·ID
- `tagId`: æ ‡ç­¾ID

**è¯·æ±‚å‚æ•°**:
```json
{
  "interestScore": 85.0,                       // å…´è¶£åˆ†æ•°ï¼Œå¯é€‰ï¼Œé»˜è®¤50.0
  "interestSource": "behavior"                 // å…´è¶£æ¥æºï¼Œå¯é€‰ï¼Œé»˜è®¤manual
}
```

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "æ·»åŠ æˆåŠŸ",
  "data": {
    "userId": 123456,
    "tagId": 1,
    "interestScore": 85.0,
    "interestSource": "behavior",
    "createTime": "2024-01-15T10:30:00Z"
  },
  "timestamp": 1705312200000,
  "traceId": "trace-123456"
}
```

### 12. ç§»é™¤ç”¨æˆ·å…´è¶£æ ‡ç­¾

**æ¥å£åœ°å€**: `DELETE /api/v1/tags/interest/{userId}/{tagId}`

**è·¯å¾„å‚æ•°**:
- `userId`: ç”¨æˆ·ID
- `tagId`: æ ‡ç­¾ID

**å“åº”ç»“æœ**:
```json
{
  "code": 200,
  "message": "ç§»é™¤æˆåŠŸ",
  "data": null,
  "timestamp": 1705314000000,
  "traceId": "trace-123456"
}
```

---

## ğŸ“‹ æ•°æ®æ¨¡å‹

### TagInfo - æ ‡ç­¾ä¿¡æ¯

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | Long | æ ‡ç­¾ID |
| tagId | Long | æ ‡ç­¾IDï¼ˆå…¼å®¹æ€§å­—æ®µï¼‰ |
| name | String | æ ‡ç­¾åç§° |
| description | String | æ ‡ç­¾æè¿° |
| color | String | æ ‡ç­¾é¢œè‰²ï¼ˆåå…­è¿›åˆ¶ï¼‰ |
| iconUrl | String | æ ‡ç­¾å›¾æ ‡URL |
| tagType | String | æ ‡ç­¾ç±»å‹ |
| categoryId | Long | æ‰€å±åˆ†ç±»IDï¼ˆä»…å­˜å‚¨IDï¼Œä¸åšè¿è¡¨æŸ¥è¯¢ï¼‰ |
| usageCount | Long | ä½¿ç”¨æ¬¡æ•° |
| heatScore | BigDecimal | çƒ­åº¦åˆ†æ•° |
| status | String | æ ‡ç­¾çŠ¶æ€ |
| interestScore | BigDecimal | ç”¨æˆ·å…´è¶£åˆ†æ•°ï¼ˆç”¨æˆ·å…´è¶£æ ‡ç­¾ä¸“ç”¨ï¼‰ |
| interestSource | String | å…´è¶£æ¥æºï¼ˆç”¨æˆ·å…´è¶£æ ‡ç­¾ä¸“ç”¨ï¼‰ |
| createTime | LocalDateTime | åˆ›å»ºæ—¶é—´ |
| updateTime | LocalDateTime | æ›´æ–°æ—¶é—´ |

### TagCreateRequest - åˆ›å»ºæ ‡ç­¾è¯·æ±‚

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| name | String | æ˜¯ | æ ‡ç­¾åç§°ï¼Œæœ€å¤§100å­—ç¬¦ |
| description | String | å¦ | æ ‡ç­¾æè¿° |
| color | String | å¦ | æ ‡ç­¾é¢œè‰²ï¼Œåå…­è¿›åˆ¶æ ¼å¼ï¼Œé»˜è®¤#1890ff |
| iconUrl | String | å¦ | æ ‡ç­¾å›¾æ ‡URL |
| tagType | String | æ˜¯ | æ ‡ç­¾ç±»å‹ï¼šcontent/interest/system |
| categoryId | Long | å¦ | æ‰€å±åˆ†ç±»ID |
| sort | Integer | å¦ | æ’åºå€¼ï¼Œé»˜è®¤0 |
| status | Integer | å¦ | çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-å¯ç”¨ï¼Œé»˜è®¤1 |

### TagUpdateRequest - æ›´æ–°æ ‡ç­¾è¯·æ±‚

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| tagId | Long | æ˜¯ | æ ‡ç­¾ID |
| name | String | å¦ | æ ‡ç­¾åç§° |
| description | String | å¦ | æ ‡ç­¾æè¿° |
| color | String | å¦ | æ ‡ç­¾é¢œè‰² |
| iconUrl | String | å¦ | æ ‡ç­¾å›¾æ ‡URL |
| categoryId | Long | å¦ | æ‰€å±åˆ†ç±»ID |
| sort | Integer | å¦ | æ’åºå€¼ |
| status | Integer | å¦ | çŠ¶æ€ |

### UserInterestTagRequest - ç”¨æˆ·å…´è¶£æ ‡ç­¾è¯·æ±‚

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| tagIds | List<Long> | æ˜¯ | æ ‡ç­¾IDåˆ—è¡¨ |
| interestScore | Double | å¦ | é»˜è®¤å…´è¶£åˆ†æ•°ï¼Œé»˜è®¤50.0 |
| interestSource | String | å¦ | å…´è¶£æ¥æºï¼šmanual/behavior/system |
| replaceAll | Boolean | å¦ | æ˜¯å¦æ›¿æ¢æ‰€æœ‰å…´è¶£æ ‡ç­¾ï¼Œé»˜è®¤false |

---

## âŒ é”™è¯¯ç å®šä¹‰

### æ ‡ç­¾ç›¸å…³é”™è¯¯ç 

| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|------------|----------|------|
| TAG_001 | 400 | æ ‡ç­¾åç§°ä¸èƒ½ä¸ºç©º | åˆ›å»ºæˆ–æ›´æ–°æ ‡ç­¾æ—¶åç§°ä¸ºç©º |
| TAG_002 | 400 | æ ‡ç­¾åç§°é•¿åº¦ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦ | æ ‡ç­¾åç§°è¿‡é•¿ |
| TAG_003 | 400 | æ ‡ç­¾ç±»å‹æ— æ•ˆ | æ ‡ç­¾ç±»å‹ä¸åœ¨æ”¯æŒèŒƒå›´å†… |
| TAG_004 | 409 | è¯¥ç±»å‹ä¸‹æ ‡ç­¾åç§°å·²å­˜åœ¨ | åŒç±»å‹ä¸‹å­˜åœ¨é‡åæ ‡ç­¾ |
| TAG_005 | 404 | æ ‡ç­¾ä¸å­˜åœ¨ | æŒ‡å®šçš„æ ‡ç­¾IDä¸å­˜åœ¨ |
| TAG_006 | 400 | æ ‡ç­¾é¢œè‰²æ ¼å¼é”™è¯¯ | é¢œè‰²å€¼ä¸æ˜¯æœ‰æ•ˆçš„åå…­è¿›åˆ¶æ ¼å¼ |
| TAG_007 | 400 | æ— æ³•åˆ é™¤æ­£åœ¨ä½¿ç”¨çš„æ ‡ç­¾ | å°è¯•åˆ é™¤æœ‰å†…å®¹å…³è”çš„æ ‡ç­¾ |
| TAG_008 | 400 | åˆ†ç±»ä¸å­˜åœ¨ | æŒ‡å®šçš„åˆ†ç±»IDä¸å­˜åœ¨ |
| TAG_009 | 400 | ç³»ç»Ÿæ ‡ç­¾ä¸å…è®¸åˆ é™¤ | å°è¯•åˆ é™¤ç³»ç»Ÿé¢„è®¾æ ‡ç­¾ |
| TAG_010 | 400 | å…´è¶£åˆ†æ•°å¿…é¡»åœ¨0-100ä¹‹é—´ | å…´è¶£åˆ†æ•°è¶…å‡ºæœ‰æ•ˆèŒƒå›´ |

### ç”¨æˆ·å…´è¶£æ ‡ç­¾ç›¸å…³é”™è¯¯ç 

| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|------------|----------|------|
| INTEREST_001 | 400 | å…´è¶£æ ‡ç­¾åˆ—è¡¨ä¸èƒ½ä¸ºç©º | è®¾ç½®å…´è¶£æ ‡ç­¾æ—¶åˆ—è¡¨ä¸ºç©º |
| INTEREST_002 | 400 | å…´è¶£æ ‡ç­¾æ•°é‡ä¸èƒ½è¶…è¿‡50ä¸ª | å…´è¶£æ ‡ç­¾è¿‡å¤š |
| INTEREST_003 | 404 | ç”¨æˆ·å…´è¶£æ ‡ç­¾ä¸å­˜åœ¨ | æŒ‡å®šçš„ç”¨æˆ·å…´è¶£æ ‡ç­¾å…³ç³»ä¸å­˜åœ¨ |
| INTEREST_004 | 400 | å…´è¶£æ¥æºæ— æ•ˆ | å…´è¶£æ¥æºä¸åœ¨æ”¯æŒèŒƒå›´å†… |
| INTEREST_005 | 409 | ç”¨æˆ·å…´è¶£æ ‡ç­¾å·²å­˜åœ¨ | é‡å¤æ·»åŠ ç›¸åŒçš„å…´è¶£æ ‡ç­¾ |

### é€šç”¨é”™è¯¯ç 

| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | é”™è¯¯ä¿¡æ¯ | è¯´æ˜ |
|--------|------------|----------|------|
| PARAM_INVALID | 400 | å‚æ•°æ— æ•ˆ | è¯·æ±‚å‚æ•°æ ¼å¼é”™è¯¯ |
| USER_NOT_FOUND | 404 | ç”¨æˆ·ä¸å­˜åœ¨ | æŒ‡å®šç”¨æˆ·IDä¸å­˜åœ¨ |
| RESOURCE_NOT_FOUND | 404 | èµ„æºä¸å­˜åœ¨ | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ |
| DUPLICATED | 409 | èµ„æºé‡å¤ | èµ„æºå·²å­˜åœ¨ |
| SYSTEM_ERROR | 500 | ç³»ç»Ÿå†…éƒ¨é”™è¯¯ | æœåŠ¡å™¨å†…éƒ¨å¼‚å¸¸ |

---

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### 1. åˆ›å»ºå†…å®¹æ ‡ç­¾

```bash
curl -X POST "http://localhost:8080/api/v1/tags" \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "äººå·¥æ™ºèƒ½",
    "description": "AIäººå·¥æ™ºèƒ½ç›¸å…³æŠ€æœ¯å’Œåº”ç”¨",
    "color": "#FF6B6B",
    "iconUrl": "https://example.com/ai-icon.png",
    "tagType": "content",
    "categoryId": 1,
    "status": 1
  }'
```

### 2. åˆ›å»ºå…´è¶£æ ‡ç­¾

```bash
curl -X POST "http://localhost:8080/api/v1/tags" \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æ‘„å½±",
    "description": "æ‘„å½±æŠ€æœ¯ä¸è‰ºæœ¯æ¬£èµ",
    "color": "#45B7D1",
    "tagType": "interest",
    "status": 1
  }'
```

### 3. æŸ¥è¯¢çƒ­é—¨æ ‡ç­¾

```bash
curl -X GET "http://localhost:8080/api/v1/tags/hot?tagType=content&limit=20&timeRange=30d" \
  -H "Authorization: Bearer {token}"
```

### 4. æœç´¢æ ‡ç­¾

```bash
curl -X GET "http://localhost:8080/api/v1/tags/search?keyword=AI&tagType=content&limit=10" \
  -H "Authorization: Bearer {token}"
```

### 5. è·å–ç”¨æˆ·å…´è¶£æ ‡ç­¾

```bash
curl -X GET "http://localhost:8080/api/v1/tags/interest/123456?limit=50&minScore=60" \
  -H "Authorization: Bearer {token}"
```

### 6. è®¾ç½®ç”¨æˆ·å…´è¶£æ ‡ç­¾

```bash
curl -X POST "http://localhost:8080/api/v1/tags/interest/123456" \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{
    "tagIds": [1, 2, 3, 4, 5],
    "interestScore": 80.0,
    "interestSource": "manual",
    "replaceAll": false
  }'
```

### 7. æ·»åŠ å•ä¸ªç”¨æˆ·å…´è¶£æ ‡ç­¾

```bash
curl -X POST "http://localhost:8080/api/v1/tags/interest/123456/1" \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{
    "interestScore": 90.0,
    "interestSource": "behavior"
  }'
```

### 8. æŒ‰ç±»å‹æŸ¥è¯¢æ ‡ç­¾

```bash
curl -X GET "http://localhost:8080/api/v1/tags/type/interest?limit=50&sortBy=heatScore&sortOrder=DESC" \
  -H "Authorization: Bearer {token}"
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ ‡ç­¾å”¯ä¸€æ€§**: åŒä¸€ç±»å‹ä¸‹çš„æ ‡ç­¾åç§°å¿…é¡»å”¯ä¸€ï¼Œä¸åŒç±»å‹å¯ä»¥é‡å
2. **æ ‡ç­¾ç±»å‹**: contentç”¨äºå†…å®¹æ ‡è®°ï¼Œinterestç”¨äºç”¨æˆ·ç”»åƒï¼Œsystemä¸ºç³»ç»Ÿé¢„è®¾
3. **çƒ­åº¦è®¡ç®—**: åŸºäºä½¿ç”¨æ¬¡æ•°ã€æ—¶é—´è¡°å‡å’Œç”¨æˆ·äº’åŠ¨çš„ç»¼åˆç®—æ³•
4. **å…´è¶£åˆ†æ•°**: èŒƒå›´0-100ï¼Œè¡¨ç¤ºç”¨æˆ·å¯¹è¯¥æ ‡ç­¾çš„å…´è¶£ç¨‹åº¦
5. **å…´è¶£æ¥æº**: manual-ç”¨æˆ·æ‰‹åŠ¨è®¾ç½®ï¼Œbehavior-è¡Œä¸ºåˆ†æï¼Œsystem-ç³»ç»Ÿæ¨è
6. **åˆ é™¤é™åˆ¶**: æ­£åœ¨è¢«å†…å®¹ä½¿ç”¨çš„æ ‡ç­¾æ— æ³•ç›´æ¥åˆ é™¤ï¼Œéœ€è¦å…ˆæ¸…ç†å…³è”
7. **ç³»ç»Ÿæ ‡ç­¾**: ç³»ç»Ÿé¢„è®¾çš„åŠŸèƒ½æ€§æ ‡ç­¾ä¸å…è®¸åˆ é™¤æˆ–ä¿®æ”¹æ ¸å¿ƒå±æ€§
8. **ç¼“å­˜ç­–ç•¥**: çƒ­é—¨æ ‡ç­¾ç¼“å­˜30åˆ†é’Ÿï¼Œç”¨æˆ·å…´è¶£æ ‡ç­¾ç¼“å­˜1å°æ—¶
9. **æ¨èç®—æ³•**: åŸºäºååŒè¿‡æ»¤å’Œå†…å®¹åŒ¹é…çš„æ··åˆæ¨èç®—æ³•
10. **æ ‡ç­¾ä¸Šé™**: å•ä¸ªç”¨æˆ·æœ€å¤šè®¾ç½®50ä¸ªå…´è¶£æ ‡ç­¾ï¼Œé˜²æ­¢ç”»åƒè¿‡äºåˆ†æ•£

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2024-01-15  
**ç»´æŠ¤å›¢é˜Ÿ**: Collide Backend Team